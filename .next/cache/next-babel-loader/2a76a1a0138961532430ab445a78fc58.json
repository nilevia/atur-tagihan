{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/pages/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router'; // Material\n\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ProductCard from '../components/global-component/ProductCard'; // Component\n\nimport MainLogo from '../components/global-component/MainLogo';\nimport OfferingTagihan from '../components/beranda/OfferingTagihan'; // redux / network\n\nimport { featureEnable } from '../utils/Flagr';\nimport { AuthNetworkCall, CommonNetworkCall, isUserLoggedValid } from '../utils/NetworkCall';\nimport { showSnackbar } from '../redux/snackbar/action';\nimport { isNotUndefinedAndNotEmpty } from '../utils/Validator';\nimport { additionalProductURL } from '../utils/MappingIdToUrl';\nexport class Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userProfile: null,\n      isLoading: true,\n      additionalProduct: [],\n      enableAdditionalProduct: false\n    };\n  }\n\n  async componentDidMount() {\n    document.body.className = 'body-blue';\n\n    if (await featureEnable(3)) {\n      document.location.href = 'https://info.bayartagihan.id/';\n    }\n\n    this.getAdditionalProduct();\n    const login = await isUserLoggedValid();\n    this.setState({\n      login\n    });\n    if (this.loginState()) this.getProfile();\n  }\n\n  componentWillUnmount() {\n    document.body.className = null;\n  }\n\n  loginState() {\n    const {\n      login\n    } = this.state;\n    const {\n      showSnackbar\n    } = this.props;\n    if (login === 'logged') return true;\n\n    if (login === 'expired') {\n      showSnackbar('Sesi anda telah habis, silahkan masuk untuk bertransaksi', 'error');\n      return false;\n    }\n\n    if (login === 'inactive') {\n      showSnackbar('Akun anda terblokir atau tidak aktif, silahkan masuk dengan akun lain', 'error');\n      return false;\n    }\n  }\n\n  onClickProduct(item) {\n    if (!this.state.enableAdditionalProduct) {\n      this.props.showSnackbar('Produk belum bisa dibei untuk saat ini', 'info');\n    } else if (this.loginState()) {\n      Router.push(`${additionalProductURL(item.id)}`);\n    }\n  }\n\n  async getAdditionalProduct() {\n    this.setState({\n      isLoading: true\n    });\n    this.setState({\n      additionalProduct: await CommonNetworkCall('/product_type/available/atur_tagihan?is_special__equals=0', 'get', this.props.showSnackbar)\n    });\n    this.setState({\n      enableAdditionalProduct: true\n    });\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  async getProfile() {\n    this.setState({\n      userProfile: await AuthNetworkCall('/customer/profile', 'get', this.props.showSnackbar)\n    });\n    console.log('get');\n  }\n\n  render() {\n    const {\n      userProfile,\n      isLoading,\n      additionalProduct\n    } = this.state;\n\n    const loginButton = __jsx(\"span\", {\n      id: \"loginButton\",\n      className: \"signup-login pointer\",\n      onClick: () => Router.push('/login'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, __jsx(\"p\", {\n      className: \"font-muli-12 bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"Daftar / Login\"));\n\n    const loggedUser = __jsx(\"div\", {\n      className: \"right-top flex \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, __jsx(\"span\", {\n      id: \"btnProfile\",\n      className: \"txt-center-ver flex white pointer font-muli-12 \",\n      onClick: () => Router.push('/akun'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, __jsx(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, \"Halo, \\xA0\"), userProfile ? userProfile.nick_name : null, \"\\xA0\", __jsx(AccountCircleIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    })), __jsx(\"img\", {\n      src: \"/icon/ic_cart_homepage.svg\",\n      className: \"margin-left-16 pointer \",\n      height: 30,\n      onClick: () => Router.push('/keranjang'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }));\n\n    return __jsx(\"div\", {\n      id: \"beranda\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, __jsx(MainLogo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"margin-top-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, __jsx(\"span\", {\n      className: \"coming-soon font-muli-14\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: \"/icon/ic_time_small.png\",\n      width: \"12px\",\n      className: \"margin-rgt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }), \"Segera Hadir\")), !isLoading && userProfile ? loggedUser : null, !isLoading && !userProfile ? loginButton : null, __jsx(\"div\", {\n      className: \"margin-rgt-16 margin-left-16 margin-btm-24 margin-top-16 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, __jsx(\"p\", {\n      className: \"font-muli-300 white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      className: \"font-muli-800 orange\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, \"Mengatur\"), ' ', \"dan\", ' ', __jsx(\"span\", {\n      className: \"font-muli-800 orange\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, \"membayar\"), ' ', \"semua tagihan anda dalam satu platform\")), __jsx(\"div\", {\n      className: \"horizontal-scroll padding-rgt-lft-16 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, __jsx(OfferingTagihan, {\n      title: \"Tagihan Bulanan\",\n      products: ['/icon/beranda/ic_beranda_call.png', '/icon/beranda/ic_beranda_electric.png', '/icon/beranda/ic_beranda_network.png'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }), __jsx(OfferingTagihan, {\n      title: \"Tagihan Digital\",\n      products: ['/icon/beranda/ic_beranda_netflix.png', '/icon/beranda/ic_beranda_others.png', '/icon/beranda/ic_beranda_spotify.png'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"margin-top-24 margin-rgt-16 margin-left-16\",\n      style: {\n        maxWidth: 500\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, __jsx(\"p\", {\n      className: \"font-muli-14 bold margin-btm-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, \"Produk Tersedia\"), isLoading ? __jsx(\"div\", {\n      className: \"flex justify-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, __jsx(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    })) : __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      container: true,\n      spacing: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, isNotUndefinedAndNotEmpty(additionalProduct) ? additionalProduct.map(item => __jsx(Grid, {\n      item: true,\n      xs: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, __jsx(ProductCard, {\n      id: `product${item.id}`,\n      title: item.name,\n      logo: item.icon,\n      large: true,\n      onClick: () => this.onClickProduct(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }))) : null))));\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/pages/index.js"],"names":["React","Component","Router","Grid","AccountCircleIcon","connect","CircularProgress","IconButton","ProductCard","MainLogo","OfferingTagihan","featureEnable","AuthNetworkCall","CommonNetworkCall","isUserLoggedValid","showSnackbar","isNotUndefinedAndNotEmpty","additionalProductURL","Home","constructor","props","state","userProfile","isLoading","additionalProduct","enableAdditionalProduct","componentDidMount","document","body","className","location","href","getAdditionalProduct","login","setState","loginState","getProfile","componentWillUnmount","onClickProduct","item","push","id","console","log","render","loginButton","loggedUser","nick_name","maxWidth","map","name","icon","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Router from 'next/router';\n\n// Material\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ProductCard from '../components/global-component/ProductCard';\n\n// Component\nimport MainLogo from '../components/global-component/MainLogo';\nimport OfferingTagihan from '../components/beranda/OfferingTagihan';\n\n// redux / network\nimport { featureEnable } from '../utils/Flagr';\nimport { AuthNetworkCall, CommonNetworkCall, isUserLoggedValid } from '../utils/NetworkCall';\nimport { showSnackbar } from '../redux/snackbar/action';\nimport { isNotUndefinedAndNotEmpty } from '../utils/Validator';\nimport { additionalProductURL } from '../utils/MappingIdToUrl';\n\nexport class Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userProfile: null,\n      isLoading: true,\n      additionalProduct: [],\n      enableAdditionalProduct: false,\n    };\n  }\n\n  async componentDidMount() {\n    document.body.className = 'body-blue';\n    if (await featureEnable(3)) {\n      document.location.href = 'https://info.bayartagihan.id/';\n    }\n    this.getAdditionalProduct();\n    const login = await isUserLoggedValid();\n    this.setState({ login });\n    if (this.loginState()) this.getProfile();\n  }\n\n  componentWillUnmount() {\n    document.body.className = null;\n  }\n\n  loginState() {\n    const { login } = this.state;\n    const { showSnackbar } = this.props;\n    if (login === 'logged') return true;\n    if (login === 'expired') {\n      showSnackbar('Sesi anda telah habis, silahkan masuk untuk bertransaksi', 'error');\n      return false;\n    }\n    if (login === 'inactive') {\n      showSnackbar('Akun anda terblokir atau tidak aktif, silahkan masuk dengan akun lain', 'error');\n      return false;\n    }\n  }\n\n  onClickProduct(item) {\n    if (!this.state.enableAdditionalProduct) {\n      this.props.showSnackbar('Produk belum bisa dibei untuk saat ini', 'info');\n    } else if (this.loginState()) {\n      Router.push(`${additionalProductURL(item.id)}`);\n    }\n  }\n\n  async getAdditionalProduct() {\n    this.setState({ isLoading: true });\n    this.setState({ additionalProduct: await CommonNetworkCall('/product_type/available/atur_tagihan?is_special__equals=0', 'get', this.props.showSnackbar) });\n    this.setState({ enableAdditionalProduct: true });\n    this.setState({ isLoading: false });\n  }\n\n  async getProfile() {\n    this.setState({ userProfile: await AuthNetworkCall('/customer/profile', 'get', this.props.showSnackbar) });\n    console.log('get');\n  }\n\n  render() {\n    const {\n      userProfile, isLoading, additionalProduct,\n    } = this.state;\n\n    const loginButton = (\n      <span id=\"loginButton\" className=\"signup-login pointer\" onClick={() => Router.push('/login')}>\n        <p className=\"font-muli-12 bold\">Daftar / Login</p>\n      </span>\n    );\n\n    const loggedUser = (\n      <div className=\"right-top flex \">\n        <span id=\"btnProfile\" className=\"txt-center-ver flex white pointer font-muli-12 \" onClick={() => Router.push('/akun')}>\n          <b>Halo, &nbsp;</b>\n          {userProfile ? userProfile.nick_name : null }\n            &nbsp;\n          <AccountCircleIcon />\n        </span>\n        <img src=\"/icon/ic_cart_homepage.svg\" className=\"margin-left-16 pointer \" height={30} onClick={() => Router.push('/keranjang')} />\n      </div>\n\n    );\n    return (\n      <div id=\"beranda\">\n        <MainLogo />\n        <br />\n        <div className=\"margin-top-16\">\n          <span className=\"coming-soon font-muli-14\">\n            <img src=\"/icon/ic_time_small.png\" width=\"12px\" className=\"margin-rgt-4\" />\n            Segera Hadir\n          </span>\n        </div>\n\n        {!isLoading && userProfile ? loggedUser : null }\n        {!isLoading && !userProfile ? loginButton : null }\n\n        <div className=\"margin-rgt-16 margin-left-16 margin-btm-24 margin-top-16 \">\n          <p className=\"font-muli-300 white\">\n            <span className=\"font-muli-800 orange\">Mengatur</span>\n            {' '}\n            dan\n            {' '}\n            <span className=\"font-muli-800 orange\">membayar</span>\n            {' '}\n            semua tagihan anda dalam satu platform\n          </p>\n        </div>\n        <div className=\"horizontal-scroll padding-rgt-lft-16 \">\n          <OfferingTagihan\n            title=\"Tagihan Bulanan\"\n            products={['/icon/beranda/ic_beranda_call.png', '/icon/beranda/ic_beranda_electric.png', '/icon/beranda/ic_beranda_network.png']}\n          />\n          <OfferingTagihan\n            title=\"Tagihan Digital\"\n            products={['/icon/beranda/ic_beranda_netflix.png', '/icon/beranda/ic_beranda_others.png', '/icon/beranda/ic_beranda_spotify.png']}\n          />\n        </div>\n        <div className=\"margin-top-24 margin-rgt-16 margin-left-16\" style={{ maxWidth: 500 }}>\n          <p className=\"font-muli-14 bold margin-btm-16\">Produk Tersedia</p>\n          {isLoading ? (\n            <div className=\"flex justify-center\">\n              <CircularProgress />\n            </div>\n\n          ) : (\n            <div>\n              <Grid container spacing={1}>\n                {isNotUndefinedAndNotEmpty(additionalProduct) ? additionalProduct.map((item) => (\n                  <Grid item xs={4}>\n                    <ProductCard\n                      id={`product${item.id}`}\n                      title={item.name}\n                      logo={item.icon}\n                      large\n                      onClick={() => this.onClickProduct(item)}\n                    />\n                  </Grid>\n                )) : null}\n              </Grid>\n            </div>\n          )}\n\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  showSnackbar,\n};\nexport default connect(null, mapDispatchToProps)(Home);\n"]},"metadata":{},"sourceType":"module"}