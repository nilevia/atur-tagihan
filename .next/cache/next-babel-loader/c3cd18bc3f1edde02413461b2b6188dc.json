{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/pages/login/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport GoogleLogin from 'react-google-login'; // material\n\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider'; // component\n\nimport { connect } from 'react-redux';\nimport ButtonBack from '../../components/global-component/ButtonBack'; // redux\n\nimport { showSnackbar } from '../../redux/snackbar/action';\nimport { BlockDialog } from '../../components/global-component/BlockDialog';\nimport CommonNetworkCall from '../../utils/CommonNetworkCall';\nexport class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    document.body.style.background = 'white';\n  }\n  /**\n   *  @summary this method mapping google response and get token then post it to backend, if success\n   *  the response google data will be saved on local\n   *  BE do validating to token given\n   * */\n\n\n  async onSuccessLogin(responseGoogle) {\n    this.setState({\n      isLoading: true\n    });\n    const data = JSON.stringify({\n      access_token: responseGoogle.accessToken,\n      token_id: responseGoogle.tokenId\n    });\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const result = await CommonNetworkCall('/customer/auth/social_login/google', 'post', data, headers, this.props.showSnackbar);\n    this.setState({\n      isLoading: false\n    });\n\n    if (result) {\n      localStorage.setItem('token', JSON.stringify(result));\n      localStorage.setItem('profile', JSON.stringify(responseGoogle.profileObj));\n      Router.back();\n    }\n\n    console.log(result);\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"main-content\",\n      id: \"mainContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }, __jsx(ButtonBack, {\n      id: \"btnBack\",\n      onClick: () => Router.back(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }), __jsx(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"txt-center-hoz font-muli-16\",\n      style: {\n        marginTop: '130px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }, \"Hi...\"), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, \"Selamat datang di BayarTagihan\")), __jsx(\"div\", {\n      className: \"txt-center-hoz pointer margin-top-36 margin-btm-24\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, __jsx(GoogleLogin, {\n      clientId: process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID,\n      render: renderProps => __jsx(Button, {\n        variant: \"outlined\",\n        startIcon: __jsx(\"img\", {\n          width: 16,\n          src: \"/icon/ic_google.png\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 28\n          }\n        }),\n        size: \"large\",\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        style: {\n          textTransform: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        className: \"font-muli-14 bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, \"Masuk atau daftar dengan Google\")),\n      onSuccess: responseGoogle => this.onSuccessLogin(responseGoogle) // onFailure={responseGoogle}\n      ,\n      cookiePolicy: \"single_host_origin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }), __jsx(BlockDialog, {\n      isOpen: this.state.isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/pages/login/index.js"],"names":["React","Component","Router","GoogleLogin","Button","Divider","connect","ButtonBack","showSnackbar","BlockDialog","CommonNetworkCall","Login","constructor","props","state","isLoading","componentDidMount","document","body","style","background","onSuccessLogin","responseGoogle","setState","data","JSON","stringify","access_token","accessToken","token_id","tokenId","headers","result","localStorage","setItem","profileObj","back","console","log","render","marginTop","process","env","NEXT_PUBLIC_GOOGLE_CLIENT_ID","renderProps","onClick","disabled","textTransform","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Router from 'next/router';\nimport GoogleLogin from 'react-google-login';\n\n// material\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n// component\nimport { connect } from 'react-redux';\nimport ButtonBack from '../../components/global-component/ButtonBack';\n\n// redux\n\nimport { showSnackbar } from '../../redux/snackbar/action';\nimport { BlockDialog } from '../../components/global-component/BlockDialog';\nimport CommonNetworkCall from '../../utils/CommonNetworkCall';\n\nexport class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n    };\n  }\n\n  componentDidMount() {\n    document.body.style.background = 'white';\n  }\n\n  /**\n   *  @summary this method mapping google response and get token then post it to backend, if success\n   *  the response google data will be saved on local\n   *  BE do validating to token given\n   * */\n\n  async onSuccessLogin(responseGoogle) {\n    this.setState({ isLoading: true });\n    const data = JSON.stringify({\n      access_token: responseGoogle.accessToken,\n      token_id: responseGoogle.tokenId,\n    });\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n    const result = await CommonNetworkCall('/customer/auth/social_login/google', 'post', data, headers, this.props.showSnackbar)\n    this.setState({ isLoading: false });\n    if (result) {\n      localStorage.setItem('token', JSON.stringify(result));\n      localStorage.setItem('profile', JSON.stringify(responseGoogle.profileObj));\n      Router.back();\n    }\n    console.log(result)\n  }\n\n  render() {\n    return (\n      <div className=\"main-content\" id=\"mainContent\">\n        <ButtonBack id=\"btnBack\" onClick={() => Router.back()} />\n        <Divider />\n        {/* Sementara */}\n        <div\n          className=\"txt-center-hoz font-muli-16\"\n          style={{ marginTop: '130px' }}\n        >\n          <p>Hi...</p>\n          <p>Selamat datang di BayarTagihan</p>\n        </div>\n        <div className=\"txt-center-hoz pointer margin-top-36 margin-btm-24\">\n\n          <GoogleLogin\n            clientId={process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID}\n            render={(renderProps) => (\n              <Button\n                variant=\"outlined\"\n                startIcon={<img width={16} src=\"/icon/ic_google.png\" />}\n                size=\"large\"\n                onClick={renderProps.onClick}\n                disabled={renderProps.disabled}\n                style={{ textTransform: 'none' }}\n              >\n                <span className=\"font-muli-14 bold\">Masuk atau daftar dengan Google</span>\n              </Button>\n            )}\n            onSuccess={(responseGoogle) => this.onSuccessLogin(responseGoogle)}\n              // onFailure={responseGoogle}\n            cookiePolicy=\"single_host_origin\"\n          />\n          <BlockDialog isOpen={this.state.isLoading} />\n        </div>\n      </div>\n\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  showSnackbar,\n};\nexport default connect(null, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}