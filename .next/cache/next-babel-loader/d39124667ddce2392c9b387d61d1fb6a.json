{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/pages/token-listrik/[order_id]/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router'; // material\n\nimport { Divider } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar'; // component\\\n\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport ButtonBack from '../../../components/global-component/ButtonBack';\nimport ButtonMain from '../../../components/global-component/ButtonMain';\nimport { isNotUndefined, meterValidation, phoneReplace, phoneValidation } from '../../../utils/Validator';\nimport ProductItem from '../../../components/additional-product/ProductItem'; // redux\n\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { getHashUrl } from '../../../utils/CommonUtils';\nimport { getRupiah } from '../../../utils/Calculate';\nimport { BlockDialog } from '../../../components/global-component/BlockDialog';\nexport class TokenListrik extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      isLoadingPriceList: true,\n      errorMeterNumber: false,\n      errorPhoneNumber: false,\n      displayContent: 1,\n      phoneNumber: '',\n      meterNumber: '',\n      priceList: [],\n      inquiryData: {\n        product_name: '-',\n        amount: '-',\n        data: {\n          subscriber_name: '-',\n          material_number: '-',\n          subscriber_id: '-',\n          subscriber_segmentation: '-',\n          power: '-',\n          phone_number: '-'\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    document.body.style.background = 'white';\n    const orderId = getHashUrl();\n    this.setState({\n      orderId\n    }); // kalau belum ada customer id, redirect ke detail tagihan\n\n    const custId = localStorage.getItem('cId');\n\n    if (custId === null) {\n      this.props.showSnackbar('Anda tidak bisa mengakses halaman ini secara langsung', 'error');\n      Router.push(`/detail-tagihan/${orderId}`);\n    } else {\n      this.setState({\n        custId\n      });\n      this.getPriceList();\n    }\n  }\n  /**\n   * @method phoneNumberWatcher\n   * @summary this function will do a simple validation for phone number\n   * then will set button enable\n   * @param event\n   */\n\n\n  async phoneNumberWatcher(event) {\n    const {\n      value\n    } = event.target; // change input to match format\n\n    await this.setState({\n      phoneNumber: phoneReplace(value)\n    });\n    const {\n      phoneNumber\n    } = this.state;\n\n    if (phoneNumber.length < 1) {\n      this.setState({\n        errorPhoneNumber: false\n      });\n    } else {\n      this.setState({\n        errorPhoneNumber: !phoneValidation(phoneNumber)\n      });\n    }\n  }\n  /**\n   * @method meterNumberWatcher\n   * @summary this method will do validation for each input on nomor meter form\n   * */\n\n\n  async meterNumberWatcher(event) {\n    const {\n      value\n    } = event.target;\n    await this.setState({\n      meterNumber: value\n    });\n\n    if (value.length < 1 || meterValidation(value)) {\n      this.setState({\n        errorMeterNumber: false\n      });\n    } else {\n      this.setState({\n        errorMeterNumber: true\n      });\n    }\n  }\n  /**\n   * @method getPriceList\n   * @summary get pricelist of electricity (id 6)\n   *\n   * */\n\n\n  async getPriceList() {\n    const {\n      showSnackbar\n    } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/product_type/6/products/atur_tagihan`;\n    await axios.get(url).then(async apiResponse => {\n      const {\n        response,\n        result\n      } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n      } else {\n        this.setState({\n          priceList: result\n        });\n      }\n\n      this.setState({\n        isLoadingPriceList: false\n      });\n    }).catch(async error => {\n      if (isNotUndefined(error.response)) {\n        const {\n          data\n        } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n\n      this.setState({\n        isLoadingPriceList: false\n      });\n    });\n  }\n  /**\n   * @method inquiry\n   * @summary this method is dummy\n   */\n\n\n  async inquiry(priceId) {\n    const {\n      showSnackbar\n    } = this.props;\n    const {\n      phoneNumber,\n      meterNumber,\n      errorPhoneNumber,\n      errorMeterNumber,\n      custId\n    } = this.state;\n    if (meterNumber === '') showSnackbar('Nomor meter belum di isi', 'error');else if (phoneNumber === '') showSnackbar('Nomor telepon belum di isi', 'error');else if (errorMeterNumber || errorPhoneNumber) showSnackbar('Masukkan nomor meter dan telepon dengan benar', 'error');else {\n      // do inquiry here\n      this.setState({\n        isLoading: true\n      });\n      const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n      const url = `${BASE_URL}/inquiry/atur_tagihan/${custId}`;\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      const data = JSON.stringify({\n        order_identifier: meterNumber,\n        price_id: priceId,\n        phone_number: phoneNumber\n      });\n      await axios.post(url, data, {\n        headers\n      }).then(async apiResponse => {\n        const {\n          response,\n          result\n        } = apiResponse.data;\n\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n          this.setState({\n            isLoading: false\n          });\n        } else {\n          this.setState({\n            displayContent: 2\n          });\n          this.setState({\n            inquiryData: result\n          });\n        }\n\n        this.setState({\n          isLoading: false\n        });\n      }).catch(async error => {\n        if (isNotUndefined(error.response)) {\n          const {\n            data\n          } = error.response;\n          showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n\n        this.setState({\n          isLoading: false\n        });\n      });\n    }\n  }\n  /**\n   * @method addToCart\n   * @summary add selected item to cart by post using\n   * order_idenifier : idpel\n   *customer_id, and price_id\n   * @returns {Promise<void>}\n   */\n\n\n  async addToCart() {\n    const {\n      showSnackbar\n    } = this.props;\n    const {\n      custId\n    } = this.state;\n    const {\n      price_id,\n      order_identifier\n    } = this.state.inquiryData;\n    this.setState({\n      isLoading: true\n    });\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/cart/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const data = JSON.stringify({\n      customer_id: parseInt(custId, 10),\n      price_id,\n      order_identifier\n    });\n    await axios.post(url, data, {\n      headers\n    }).then(async apiResponse => {\n      const {\n        response\n      } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n      } else {\n        Router.push(`/detail-tagihan/${this.state.orderId}`);\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    }).catch(error => {\n      if (isNotUndefined(error.response)) {\n        const {\n          data\n        } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      errorMeterNumber,\n      isLoading,\n      isLoadingPriceList,\n      phoneNumber,\n      meterNumber,\n      displayContent,\n      errorPhoneNumber,\n      priceList,\n      inquiryData\n    } = this.state;\n    let content;\n\n    if (displayContent === 1) {\n      content = __jsx(\"div\", {\n        id: \"firstContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }\n      }, __jsx(ButtonBack, {\n        id: \"btnBack\",\n        onClick: () => Router.back(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }\n      }), __jsx(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }\n      }), __jsx(\"div\", {\n        className: \"margin-top-24 margin-btm-24\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-18 bold margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }\n      }, \"Token Listrik\"), __jsx(TextField, {\n        id: \"meterNumberField\",\n        placeholder: \"contoh: 123456789123\",\n        fullWidth: true,\n        margin: \"dense\",\n        InputProps: {\n          disableUnderline: true\n        },\n        inputProps: {\n          maxLength: 12\n        },\n        label: \"Masukkan nomor meter Anda\",\n        variant: \"filled\",\n        color: \"primary\",\n        onChange: event => this.meterNumberWatcher(event),\n        value: meterNumber,\n        error: errorMeterNumber,\n        helperText: errorMeterNumber ? 'Dalam bentuk angka, 11 - 12 digit' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }\n      }), __jsx(TextField, {\n        id: \"phoneNumberField\",\n        placeholder: \"contoh: 081234567891\",\n        fullWidth: true,\n        margin: \"dense\",\n        inputProps: {\n          maxLength: 13\n        },\n        label: \"Masukkan nomor handphone\",\n        variant: \"filled\",\n        color: \"primary\",\n        onChange: event => this.phoneNumberWatcher(event),\n        error: errorPhoneNumber,\n        helperText: errorPhoneNumber ? 'Nomor telepon 11 sampai 13 digit' : '',\n        value: phoneNumber,\n        InputProps: {\n          disableUnderline: true\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"additional-product-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }\n      }, isLoadingPriceList ? __jsx(CircularProgress, {\n        style: {\n          position: 'relative',\n          left: '45%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 17\n        }\n      }) : priceList.map((item, index) => __jsx(ProductItem, {\n        id: `item${index}`,\n        title: item.product_name,\n        desc: item.product_desc,\n        price: item.sell_price,\n        onClick: () => this.inquiry(item.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 17\n        }\n      }))));\n    } else if (displayContent === 2) {\n      content = __jsx(\"div\", {\n        id: \"secondContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 9\n        }\n      }, __jsx(ButtonBack, {\n        id: \"btnBack\",\n        onClick: () => this.setState({\n          displayContent: 1\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }\n      }), __jsx(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }\n      }), __jsx(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"space-between\",\n        className: \"margin-top-16 txt-center-ver margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }\n      }, __jsx(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-14 margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 15\n        }\n      }, \"Nama pelanggan\"), __jsx(\"p\", {\n        className: \"font-muli-14 margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 15\n        }\n      }, \"No Meter\"), __jsx(\"p\", {\n        className: \"font-muli-14 margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }\n      }, \"ID Pelanggan\"), __jsx(\"p\", {\n        className: \"font-muli-14 margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }\n      }, \"Daya\"), __jsx(\"p\", {\n        className: \"font-muli-14 margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }\n      }, \"No Handphone\")), __jsx(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-14 bold txt-end margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }\n      }, inquiryData.data.subscriber_name), __jsx(\"p\", {\n        className: \"font-muli-14 bold txt-end margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 15\n        }\n      }, inquiryData.data.material_number), __jsx(\"p\", {\n        className: \"font-muli-14 bold txt-end margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }\n      }, inquiryData.data.subscriber_id), __jsx(\"p\", {\n        className: \"font-muli-14 bold txt-end margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }\n      }, `${inquiryData.data.subscriber_segmentation} / ${inquiryData.data.power} Watt`), __jsx(\"p\", {\n        className: \"font-muli-14 bold txt-end margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 15\n        }\n      }, inquiryData.data.phone_number))), __jsx(\"div\", {\n        className: \"padding-16 common-border margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-14 bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }\n      }, inquiryData.product_name), __jsx(\"p\", {\n        className: \"font-muli-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }\n      }, getRupiah(inquiryData.amount))), __jsx(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }\n      }), __jsx(\"div\", {\n        className: \" margin-btm-16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }\n      }), __jsx(\"p\", {\n        className: \"font-muli-14\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }\n      }, \"* Ketika transaksi berhasil, kami akan mengirimkan token ke nomor handphone anda.\"), __jsx(AppBar, {\n        position: \"fixed\",\n        style: {\n          top: 'auto',\n          bottom: 0,\n          backgroundColor: '#fff'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }\n      }, __jsx(Toolbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }\n      }, __jsx(ButtonMain, {\n        className: \"margin-btm-16\",\n        size: \"large\",\n        id: \"addToCart\",\n        color: \"primary\",\n        width: \"fullWidth\",\n        onClick: () => this.addToCart(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 15\n        }\n      }, \"Tambahkan Ke Tagihan\"))));\n    }\n\n    return __jsx(\"div\", {\n      className: \"main-content\",\n      id: \"mainContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 7\n      }\n    }, content, __jsx(BlockDialog, {\n      isOpen: isLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(TokenListrik);","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/pages/token-listrik/[order_id]/index.js"],"names":["React","Component","Router","Divider","TextField","CircularProgress","Grid","Toolbar","AppBar","connect","axios","ButtonBack","ButtonMain","isNotUndefined","meterValidation","phoneReplace","phoneValidation","ProductItem","showSnackbar","getHashUrl","getRupiah","BlockDialog","TokenListrik","constructor","props","state","isLoading","isLoadingPriceList","errorMeterNumber","errorPhoneNumber","displayContent","phoneNumber","meterNumber","priceList","inquiryData","product_name","amount","data","subscriber_name","material_number","subscriber_id","subscriber_segmentation","power","phone_number","componentDidMount","document","body","style","background","orderId","setState","custId","localStorage","getItem","push","getPriceList","phoneNumberWatcher","event","value","target","length","meterNumberWatcher","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","get","then","apiResponse","response","result","code","catch","error","user_errors","toString","inquiry","priceId","headers","JSON","stringify","order_identifier","price_id","post","addToCart","customer_id","parseInt","render","content","back","disableUnderline","maxLength","position","left","map","item","index","product_desc","sell_price","id","top","bottom","backgroundColor","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Router from 'next/router';\n\n// material\nimport { Divider } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\n\n// component\\\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport ButtonBack from '../../../components/global-component/ButtonBack';\nimport ButtonMain from '../../../components/global-component/ButtonMain';\nimport {\n  isNotUndefined,\n  meterValidation,\n  phoneReplace,\n  phoneValidation,\n} from '../../../utils/Validator';\nimport ProductItem from '../../../components/additional-product/ProductItem';\n// redux\n\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { getHashUrl } from '../../../utils/CommonUtils';\nimport { getRupiah } from '../../../utils/Calculate';\nimport { BlockDialog } from '../../../components/global-component/BlockDialog';\n\nexport class TokenListrik extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      isLoadingPriceList: true,\n      errorMeterNumber: false,\n      errorPhoneNumber: false,\n      displayContent: 1,\n      phoneNumber: '',\n      meterNumber: '',\n      priceList: [],\n      inquiryData: {\n        product_name: '-',\n        amount: '-',\n        data: {\n          subscriber_name: '-',\n          material_number: '-',\n          subscriber_id: '-',\n          subscriber_segmentation: '-',\n          power: '-',\n          phone_number: '-',\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    document.body.style.background = 'white';\n    const orderId = getHashUrl();\n    this.setState({ orderId });\n\n    // kalau belum ada customer id, redirect ke detail tagihan\n    const custId = localStorage.getItem('cId');\n    if (custId === null) {\n      this.props.showSnackbar('Anda tidak bisa mengakses halaman ini secara langsung', 'error');\n      Router.push(`/detail-tagihan/${orderId}`);\n    } else {\n      this.setState({ custId });\n      this.getPriceList();\n    }\n  }\n\n  /**\n   * @method phoneNumberWatcher\n   * @summary this function will do a simple validation for phone number\n   * then will set button enable\n   * @param event\n   */\n  async phoneNumberWatcher(event) {\n    const { value } = event.target;\n    // change input to match format\n    await this.setState({ phoneNumber: phoneReplace(value) });\n    const { phoneNumber } = this.state;\n    if (phoneNumber.length < 1) {\n      this.setState({ errorPhoneNumber: false });\n    } else {\n      this.setState({ errorPhoneNumber: !phoneValidation(phoneNumber) });\n    }\n  }\n\n  /**\n   * @method meterNumberWatcher\n   * @summary this method will do validation for each input on nomor meter form\n   * */\n  async meterNumberWatcher(event) {\n    const { value } = event.target;\n    await this.setState({ meterNumber: value });\n    if (value.length < 1 || meterValidation(value)) {\n      this.setState({ errorMeterNumber: false });\n    } else {\n      this.setState({ errorMeterNumber: true });\n    }\n  }\n\n  /**\n   * @method getPriceList\n   * @summary get pricelist of electricity (id 6)\n   *\n   * */\n  async getPriceList() {\n    const { showSnackbar } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/product_type/6/products/atur_tagihan`;\n    await axios\n      .get(url)\n      .then(async (apiResponse) => {\n        const { response, result } = apiResponse.data;\n\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n        } else {\n          this.setState({ priceList: result });\n        }\n        this.setState({ isLoadingPriceList: false });\n      })\n      .catch(async (error) => {\n        if (isNotUndefined(error.response)) {\n          const { data } = error.response;\n          showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n        this.setState({ isLoadingPriceList: false });\n      });\n  }\n\n  /**\n   * @method inquiry\n   * @summary this method is dummy\n   */\n  async inquiry(priceId) {\n    const { showSnackbar } = this.props;\n    const {\n      phoneNumber, meterNumber, errorPhoneNumber, errorMeterNumber, custId,\n    } = this.state;\n\n    if (meterNumber === '') showSnackbar('Nomor meter belum di isi', 'error');\n    else if (phoneNumber === '') showSnackbar('Nomor telepon belum di isi', 'error');\n    else if (errorMeterNumber || errorPhoneNumber) showSnackbar('Masukkan nomor meter dan telepon dengan benar', 'error');\n    else {\n      // do inquiry here\n      this.setState({ isLoading: true });\n      const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n      const url = `${BASE_URL}/inquiry/atur_tagihan/${custId}`;\n      const headers = {\n        'Content-Type': 'application/json',\n      };\n\n      const data = JSON.stringify({\n        order_identifier: meterNumber,\n        price_id: priceId,\n        phone_number: phoneNumber,\n      });\n\n      await axios\n        .post(url, data, { headers })\n        .then(async (apiResponse) => {\n          const { response, result } = apiResponse.data;\n          if (response.code !== '000000') {\n            showSnackbar('Terjadi Gangguan', 'error');\n            this.setState({ isLoading: false });\n          } else {\n            this.setState({ displayContent: 2 });\n            this.setState({ inquiryData: result });\n          }\n          this.setState({ isLoading: false });\n        }).catch(async (error) => {\n          if (isNotUndefined(error.response)) {\n            const { data } = error.response;\n            showSnackbar(data.response.user_errors, 'error');\n          } else {\n            showSnackbar(error.toString(), 'error');\n          }\n          this.setState({ isLoading: false });\n        });\n    }\n  }\n\n  /**\n   * @method addToCart\n   * @summary add selected item to cart by post using\n   * order_idenifier : idpel\n   *customer_id, and price_id\n   * @returns {Promise<void>}\n   */\n  async addToCart() {\n    const { showSnackbar } = this.props;\n    const { custId } = this.state;\n    const { price_id, order_identifier } = this.state.inquiryData;\n\n    this.setState({ isLoading: true });\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/cart/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n    const data = JSON.stringify({\n      customer_id: parseInt(custId, 10),\n      price_id,\n      order_identifier,\n    });\n    await axios\n      .post(url, data, { headers })\n      .then(async (apiResponse) => {\n        const { response } = apiResponse.data;\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n        } else {\n          Router.push(`/detail-tagihan/${this.state.orderId}`);\n        }\n        this.setState({ isLoading: false });\n      }).catch((error) => {\n        if (isNotUndefined(error.response)) {\n          const { data } = error.response;\n          showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n        this.setState({ isLoading: false });\n      });\n  }\n\n  render() {\n    const {\n      errorMeterNumber, isLoading, isLoadingPriceList,\n      phoneNumber, meterNumber, displayContent, errorPhoneNumber, priceList,\n      inquiryData,\n    } = this.state;\n\n    let content;\n\n    if (displayContent === 1) {\n      content = (\n        <div id=\"firstContent\">\n          <ButtonBack id=\"btnBack\" onClick={() => Router.back()} />\n          <Divider />\n          <div className=\"margin-top-24 margin-btm-24\">\n            <p className=\"font-muli-18 bold margin-btm-16\">Token Listrik</p>\n            <TextField\n              id=\"meterNumberField\"\n              placeholder=\"contoh: 123456789123\"\n              fullWidth\n              margin=\"dense\"\n              InputProps={{\n                disableUnderline: true,\n              }}\n              inputProps={{ maxLength: 12 }}\n              label=\"Masukkan nomor meter Anda\"\n              variant=\"filled\"\n              color=\"primary\"\n              onChange={(event) => this.meterNumberWatcher(event)}\n              value={meterNumber}\n              error={errorMeterNumber}\n              helperText={errorMeterNumber ? 'Dalam bentuk angka, 11 - 12 digit' : ''}\n            />\n            <TextField\n              id=\"phoneNumberField\"\n              placeholder=\"contoh: 081234567891\"\n              fullWidth\n              margin=\"dense\"\n              inputProps={{ maxLength: 13 }}\n              label=\"Masukkan nomor handphone\"\n              variant=\"filled\"\n              color=\"primary\"\n              onChange={(event) => this.phoneNumberWatcher(event)}\n              error={errorPhoneNumber}\n              helperText={errorPhoneNumber ? 'Nomor telepon 11 sampai 13 digit' : ''}\n              value={phoneNumber}\n              InputProps={{\n                disableUnderline: true,\n              }}\n            />\n          </div>\n          <div className=\"additional-product-content\">\n\n            {isLoadingPriceList\n              ? <CircularProgress style={{ position: 'relative', left: '45%' }} />\n              : priceList.map((item, index) => (\n                <ProductItem\n                  id={`item${index}`}\n                  title={item.product_name}\n                  desc={item.product_desc}\n                  price={item.sell_price}\n                  onClick={() => this.inquiry(item.id)}\n                />\n              ))}\n\n          </div>\n        </div>\n      );\n    } else if (displayContent === 2) {\n      content = (\n        <div id=\"secondContent\">\n          <ButtonBack id=\"btnBack\" onClick={() => this.setState({ displayContent: 1 })} />\n          <Divider />\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"space-between\"\n            className=\"margin-top-16 txt-center-ver margin-btm-16\"\n          >\n            <Grid>\n              <p className=\"font-muli-14 margin-btm-16\">Nama pelanggan</p>\n              <p className=\"font-muli-14 margin-btm-16\">No Meter</p>\n              <p className=\"font-muli-14 margin-btm-16\">ID Pelanggan</p>\n              <p className=\"font-muli-14 margin-btm-16\">Daya</p>\n              <p className=\"font-muli-14 margin-btm-16\">No Handphone</p>\n            </Grid>\n            <Grid>\n              <p className=\"font-muli-14 bold txt-end margin-btm-16\">{inquiryData.data.subscriber_name}</p>\n              <p className=\"font-muli-14 bold txt-end margin-btm-16\">{inquiryData.data.material_number}</p>\n              <p className=\"font-muli-14 bold txt-end margin-btm-16\">{inquiryData.data.subscriber_id}</p>\n              <p className=\"font-muli-14 bold txt-end margin-btm-16\">{`${inquiryData.data.subscriber_segmentation} / ${inquiryData.data.power} Watt`}</p>\n              <p className=\"font-muli-14 bold txt-end margin-btm-16\">{inquiryData.data.phone_number}</p>\n\n            </Grid>\n          </Grid>\n          <div className=\"padding-16 common-border margin-btm-16\">\n            <p className=\"font-muli-14 bold\">{inquiryData.product_name}</p>\n            <p className=\"font-muli-12\">{getRupiah(inquiryData.amount)}</p>\n          </div>\n          <Divider />\n          <div className=\" margin-btm-16\" />\n          <p className=\"font-muli-14\">\n            * Ketika transaksi berhasil, kami akan mengirimkan token ke nomor handphone anda.\n          </p>\n\n          <AppBar position=\"fixed\" style={{ top: 'auto', bottom: 0, backgroundColor: '#fff' }}>\n            <Toolbar>\n              <ButtonMain className=\"margin-btm-16\" size=\"large\" id=\"addToCart\" color=\"primary\" width=\"fullWidth\" onClick={() => this.addToCart()}>\n                Tambahkan Ke Tagihan\n              </ButtonMain>\n            </Toolbar>\n          </AppBar>\n\n        </div>\n      );\n    }\n    return (\n      <div className=\"main-content\" id=\"mainContent\">\n        {content}\n        <BlockDialog isOpen={isLoading}/>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  showSnackbar,\n};\nexport default connect(null, mapDispatchToProps)(TokenListrik);\n"]},"metadata":{},"sourceType":"module"}