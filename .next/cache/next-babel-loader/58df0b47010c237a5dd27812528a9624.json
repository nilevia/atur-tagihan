{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/pages/detail-tagihan/[order_id]/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router'; // material\n\nimport CircularProgress from '@material-ui/core/CircularProgress'; // component\n\nimport { connect } from 'react-redux';\nimport MainLogo from '../../../components/global-component/MainLogo';\nimport { getHashUrl } from '../../../utils/CommonUtils'; // redux\n\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { isNotUndefined } from '../../../utils/Validator';\nimport { isUserLoggedValid } from '../../../utils/NetworkCall';\nimport CustomDialog from '../../../components/global-component/CustomDialog';\nexport class DetailTagihan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true\n    };\n  }\n\n  async componentDidMount() {\n    // document.body.className = 'body-blue';\n    const orderId = getHashUrl();\n    this.setState({\n      orderId\n    });\n    this.setState({\n      login: await isUserLoggedValid()\n    });\n\n    if (this.state.login === 'logged') {\n      this.inquiry(orderId);\n    }\n  }\n\n  componentWillUnmount() {// document.body.className = null;\n  }\n  /**\n   * @method Inquiry\n   * @summary do inquiry of bayartagihan product\n   * @param hash\n   * @returns {Promise<void>}\n   * @note gak pake helper karena banyak kondisi\n   */\n\n\n  async inquiry(hash) {\n    const {\n      showSnackbar\n    } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/inquiry/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`\n    };\n    const data = JSON.stringify({\n      order_identifier: hash\n    });\n    await axios.post(url, data, {\n      headers\n    }).then(async apiResponse => {\n      const {\n        response,\n        result\n      } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        this.setState({\n          isLoading: false\n        });\n      } else if (result.is_processed === 1) {\n        showSnackbar('Tagihan anda sedang di proses', 'error');\n        Router.push('/riwayat');\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        Router.replace('/keranjang');\n      }\n    }).catch(error => {\n      if (isNotUndefined(error.response)) {\n        const {\n          data\n        } = error.response;\n\n        if (data.response.code === '000007') {\n          Router.push('/url-not-found');\n        } // payment by b2b\n        else if (data.response.code === '000008') {\n            Router.push('/pembayaran-berhasil');\n          } else if (data.response.code === '000009') {\n            Router.push('/expired-bill');\n          }\n\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      isLoading,\n      login\n    } = this.state;\n    let dialogLogin;\n\n    if (login === 'empty' || login === 'expired' || login === 'inactive') {\n      let title;\n\n      switch (login) {\n        case 'expired':\n          title = 'Sesi Anda Telah Habis';\n          break;\n\n        case 'inactive':\n          title = 'Akun Anda Tidak Aktif atau Terblokir';\n          break;\n\n        default:\n          title = 'Pemberitahuan';\n      }\n\n      dialogLogin = __jsx(CustomDialog, {\n        title: title,\n        content: \"Silahkan login menggunakan akun google anda untuk melanjutkan transaksi ini.\" // cancelText=\"Lanjutkan tanpa login\"\n        ,\n        confirmText: \"Login\" // onCancel={() => localStorage.removeItem('token')}\n        ,\n        onConfirm: () => Router.push({\n          pathname: '/login',\n          query: {\n            ref: `/detail-tagihan/${this.state.orderId}`\n          }\n        }),\n        open: true,\n        mode: \"vertical\",\n        block: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return __jsx(\"div\", {\n      className: \"body-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, __jsx(MainLogo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }), isLoading ? __jsx(CircularProgress, {\n      style: {\n        position: 'absolute',\n        left: '47%',\n        top: '50%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }) : null, dialogLogin);\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(DetailTagihan);","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/pages/detail-tagihan/[order_id]/index.js"],"names":["React","Component","axios","Router","CircularProgress","connect","MainLogo","getHashUrl","showSnackbar","isNotUndefined","isUserLoggedValid","CustomDialog","DetailTagihan","constructor","props","state","isLoading","componentDidMount","orderId","setState","login","inquiry","componentWillUnmount","hash","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","headers","Authorization","JSON","parse","localStorage","getItem","access_token","data","stringify","order_identifier","post","then","apiResponse","response","result","code","is_processed","push","replace","catch","error","user_errors","toString","render","dialogLogin","title","pathname","query","ref","position","left","top","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\n// material\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n// component\nimport { connect } from 'react-redux';\nimport MainLogo from '../../../components/global-component/MainLogo';\nimport { getHashUrl } from '../../../utils/CommonUtils';\n\n// redux\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { isNotUndefined } from '../../../utils/Validator';\nimport { isUserLoggedValid } from '../../../utils/NetworkCall';\nimport CustomDialog from '../../../components/global-component/CustomDialog';\n\nexport class DetailTagihan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n    };\n  }\n\n  async componentDidMount() {\n    // document.body.className = 'body-blue';\n    const orderId = getHashUrl();\n    this.setState({ orderId });\n    this.setState({ login: await isUserLoggedValid() });\n\n    if (this.state.login === 'logged') {\n      this.inquiry(orderId);\n    }\n  }\n\n  componentWillUnmount() {\n    // document.body.className = null;\n  }\n\n  /**\n   * @method Inquiry\n   * @summary do inquiry of bayartagihan product\n   * @param hash\n   * @returns {Promise<void>}\n   * @note gak pake helper karena banyak kondisi\n   */\n  async inquiry(hash) {\n    const { showSnackbar } = this.props;\n\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/inquiry/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`,\n    };\n    const data = JSON.stringify({\n      order_identifier: hash,\n    });\n\n    await axios\n      .post(url, data, { headers })\n      .then(async (apiResponse) => {\n        const { response, result } = apiResponse.data;\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n          this.setState({ isLoading: false });\n        } else if (result.is_processed === 1) {\n          showSnackbar('Tagihan anda sedang di proses', 'error');\n          Router.push('/riwayat');\n          this.setState({ isLoading: false });\n        } else {\n          Router.replace('/keranjang');\n        }\n      }).catch((error) => {\n        if (isNotUndefined(error.response)) {\n          const { data } = error.response;\n          if (data.response.code === '000007') {\n            Router.push('/url-not-found');\n          }\n          // payment by b2b\n          else if (data.response.code === '000008') {\n            Router.push('/pembayaran-berhasil');\n          } else if (data.response.code === '000009') {\n            Router.push('/expired-bill');\n          }\n          showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n        this.setState({ isLoading: false });\n      });\n  }\n\n  render() {\n    const { isLoading, login } = this.state;\n\n    let dialogLogin;\n    if (login === 'empty' || login === 'expired' || login === 'inactive') {\n      let title;\n      switch (login) {\n        case 'expired':\n          title = 'Sesi Anda Telah Habis';\n          break;\n        case 'inactive':\n          title = 'Akun Anda Tidak Aktif atau Terblokir';\n          break;\n        default:\n          title = 'Pemberitahuan';\n      }\n      dialogLogin = (\n        <CustomDialog\n          title={title}\n          content=\"Silahkan login menggunakan akun google anda untuk melanjutkan transaksi ini.\"\n          // cancelText=\"Lanjutkan tanpa login\"\n          confirmText=\"Login\"\n          // onCancel={() => localStorage.removeItem('token')}\n          onConfirm={() => Router.push({ pathname: '/login', query: { ref: `/detail-tagihan/${this.state.orderId}` } })}\n          open\n          mode=\"vertical\"\n          block\n        />\n      );\n    }\n\n    return (\n      <div className=\"body-blue\">\n        <MainLogo />\n        {isLoading ? (\n          <CircularProgress style={{ position: 'absolute', left: '47%', top: '50%' }} />\n        ) : null}\n        {dialogLogin}\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  showSnackbar,\n};\n\nexport default connect(null, mapDispatchToProps)(DetailTagihan);\n"]},"metadata":{},"sourceType":"module"}