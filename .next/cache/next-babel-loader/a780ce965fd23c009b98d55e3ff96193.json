{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator'; // notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default function CommonNetworkCall(path, method) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var showSnackbar = arguments.length > 4 ? arguments[4] : undefined;\n  var BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n  var url = \"\".concat(BASE_URL).concat(path);\n\n  var _axios;\n\n  switch (method) {\n    case 'get':\n      _axios = axios.get(url);\n      break;\n\n    case 'post':\n      _axios = axios.post(url, data, {\n        headers: headers\n      });\n      break;\n\n    case 'delete':\n      _axios = axios[\"delete\"](url, {\n        headers: headers\n      });\n      break;\n\n    case 'put':\n      _axios = axios.put(url, data, {\n        headers: headers\n      });\n      break;\n\n    default:\n      _axios = axios();\n  }\n\n  _axios.then( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(apiResponse) {\n      var _apiResponse$data, response, result;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _apiResponse$data = apiResponse.data, response = _apiResponse$data.response, result = _apiResponse$data.result;\n\n              if (!(response.code !== '000000')) {\n                _context.next = 4;\n                break;\n              }\n\n              showSnackbar('Terjadi Gangguan', 'error');\n              return _context.abrupt(\"return\", null);\n\n            case 4:\n              console.log('ugh');\n              return _context.abrupt(\"return\", result);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }())[\"catch\"]( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(error) {\n      var _data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (isNotUndefined(error.response)) {\n                _data = error.response.data;\n                showSnackbar(_data.response.user_errors, 'error');\n              } else {\n                showSnackbar(error.toString(), 'error');\n              }\n\n              return _context2.abrupt(\"return\", null);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n}\n_c = CommonNetworkCall;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommonNetworkCall\");","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/utils/CommonNetworkCall.js"],"names":["React","axios","isNotUndefined","CommonNetworkCall","path","method","data","headers","showSnackbar","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","_axios","get","post","put","then","apiResponse","response","result","code","console","log","error","user_errors","toString"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,aAA/B,C,CAEA;AACA;;AAEA,eAAe,SAASC,iBAAT,CAA2BC,IAA3B,EAAiCC,MAAjC,EAAgF;AAAA,MAAvCC,IAAuC,uEAAhC,EAAgC;AAAA,MAA5BC,OAA4B,uEAAlB,EAAkB;AAAA,MAAdC,YAAc;AAC7F,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,wBAA7B;AACA,MAAMC,GAAG,aAAMJ,QAAN,SAAiBL,IAAjB,CAAT;;AAEA,MAAIU,MAAJ;;AACA,UAAQT,MAAR;AACE,SAAK,KAAL;AACES,MAAAA,MAAM,GAAGb,KAAK,CAACc,GAAN,CAAUF,GAAV,CAAT;AACA;;AACF,SAAK,MAAL;AACEC,MAAAA,MAAM,GAAGb,KAAK,CAACe,IAAN,CAAWH,GAAX,EAAgBP,IAAhB,EAAsB;AAAEC,QAAAA,OAAO,EAAPA;AAAF,OAAtB,CAAT;AACA;;AACF,SAAK,QAAL;AACEO,MAAAA,MAAM,GAAGb,KAAK,UAAL,CAAaY,GAAb,EAAkB;AAAEN,QAAAA,OAAO,EAAPA;AAAF,OAAlB,CAAT;AACA;;AACF,SAAK,KAAL;AACEO,MAAAA,MAAM,GAAGb,KAAK,CAACgB,GAAN,CAAUJ,GAAV,EAAeP,IAAf,EAAqB;AAAEC,QAAAA,OAAO,EAAPA;AAAF,OAArB,CAAT;AACA;;AACF;AACEO,MAAAA,MAAM,GAAGb,KAAK,EAAd;AAdJ;;AAgBAa,EAAAA,MAAM,CACHI,IADH;AAAA,wEACQ,iBAAOC,WAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kCACyBA,WAAW,CAACb,IADrC,EACIc,QADJ,qBACIA,QADJ,EACcC,MADd,qBACcA,MADd;;AAAA,oBAGAD,QAAQ,CAACE,IAAT,KAAkB,QAHlB;AAAA;AAAA;AAAA;;AAIFd,cAAAA,YAAY,CAAC,kBAAD,EAAqB,OAArB,CAAZ;AAJE,+CAKK,IALL;;AAAA;AAOJe,cAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AAPI,+CAQGH,MARH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADR;;AAAA;AAAA;AAAA;AAAA;AAAA,yEAWS,kBAAOI,KAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACL,kBAAIvB,cAAc,CAACuB,KAAK,CAACL,QAAP,CAAlB,EAAoC;AAC1Bd,gBAAAA,KAD0B,GACjBmB,KAAK,CAACL,QADW,CAC1Bd,IAD0B;AAElCE,gBAAAA,YAAY,CAACF,KAAI,CAACc,QAAL,CAAcM,WAAf,EAA4B,OAA5B,CAAZ;AACD,eAHD,MAGO;AACLlB,gBAAAA,YAAY,CAACiB,KAAK,CAACE,QAAN,EAAD,EAAmB,OAAnB,CAAZ;AACD;;AANI,gDAOE,IAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAXT;;AAAA;AAAA;AAAA;AAAA;AAoBD;KAzCuBxB,iB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator';\n\n// notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default function CommonNetworkCall(path, method, data = '', headers = {}, showSnackbar) {\n  const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n  const url = `${BASE_URL}${path}`;\n\n  let _axios;\n  switch (method) {\n    case 'get':\n      _axios = axios.get(url);\n      break;\n    case 'post':\n      _axios = axios.post(url, data, { headers });\n      break;\n    case 'delete':\n      _axios = axios.delete(url, { headers });\n      break;\n    case 'put':\n      _axios = axios.put(url, data, { headers });\n      break;\n    default:\n      _axios = axios();\n  }\n  _axios\n    .then(async (apiResponse) => {\n      const { response, result } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        return null;\n      }\n      console.log('ugh');\n      return result;\n    })\n    .catch(async (error) => {\n      if (isNotUndefined(error.response)) {\n        const { data } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n      return null;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}