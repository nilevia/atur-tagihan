{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/components/ConfirmationDialogPaymentMethod.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Router from 'next/router'; // Material\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport CircularProgress from '@material-ui/core/CircularProgress'; // Redux\n\nimport { connect } from 'react-redux';\nimport Grid from '@material-ui/core/Grid';\nimport axios from 'axios';\nimport { showDialog, clearDialog } from '../redux/paymentMethod/action';\nimport { showSnackbar } from '../redux/snackbar/action'; // Component\n\nimport ButtonMain from './global-component/ButtonMain';\nimport { AuthNetworkCall } from '../utils/NetworkCall';\nimport { isNotUndefined } from '../utils/Validator';\nexport class ConfirmationDialogPaymentMethod extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false\n    };\n  }\n\n  handleClose() {\n    this.props.clearDialog();\n  }\n  /**\n   * @summary tidak menggunakan helper karena kondisi khusus\n   * @param itemCartId\n   * @param paymentMethodId\n   * @returns {Promise<void>}\n   */\n\n\n  async createOrder(itemCartId, paymentMethodId) {\n    this.setState({\n      isLoading: true\n    });\n    const {\n      showSnackbar\n    } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/order`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`\n    };\n    const data = JSON.stringify({\n      cart_id: itemCartId,\n      payment_method_id: paymentMethodId\n    });\n    await axios.post(url, data, {\n      headers\n    }).then(async apiResponse => {\n      const {\n        response,\n        result\n      } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        await Router.push(`/status-pembayaran/${result.id}`);\n      }\n    }).catch(error => {\n      if (isNotUndefined(error.response)) {\n        const {\n          data\n        } = error.response; // ada item expired\n\n        if (data.response.code === '000012') {\n          showSnackbar(data.response.user_errors, 'error', true);\n        } else showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n    });\n    this.setState({\n      isLoading: false\n    });\n    this.handleClose();\n  }\n\n  render() {\n    const {\n      dialogOpen,\n      groupPayment,\n      paymentLogo,\n      paymentId,\n      itemCartId\n    } = this.props.PaymentMethod;\n    const {\n      isLoading\n    } = this.state;\n    return __jsx(Dialog, {\n      disableBackdropClick: true,\n      open: dialogOpen,\n      fullWidth: true,\n      maxWidth: \"xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, __jsx(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, __jsx(\"p\", {\n      className: \"font-muli-18 bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, \"Konfirmasi\"), __jsx(\"p\", {\n      className: \"font-muli-14 margin-btm-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, \"Apakah anda yakin ingin menggunakan :\"), __jsx(\"p\", {\n      className: \"font-muli-14 margin-btm-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, groupPayment), __jsx(\"img\", {\n      src: paymentLogo,\n      className: \"payment-method-diaglog-image margin-btm-32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), isLoading ? __jsx(CircularProgress, {\n      style: {\n        position: 'sticky',\n        left: '47%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }) : __jsx(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, __jsx(ButtonMain, {\n      id: \"btnClose\",\n      onClick: () => this.handleClose(),\n      color: \"secondary\",\n      width: \"fullWidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"Kembali\")), __jsx(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, __jsx(ButtonMain, {\n      id: \"btnNext\",\n      onClick: () => this.createOrder(itemCartId, paymentId),\n      color: \"primary\",\n      width: \"fullWidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, \"Lanjutkan\")))));\n  }\n\n}\nConfirmationDialogPaymentMethod.propTypes = {\n  clearDialog: PropTypes.func.isRequired,\n  PaymentMethod: PropTypes.shape({\n    dialogOpen: PropTypes.bool,\n    groupPayment: PropTypes.string,\n    paymentLogo: PropTypes.string,\n    paymentId: PropTypes.number,\n    itemCartId: PropTypes.string\n  }).isRequired\n};\n\nconst mapStateToProps = state => ({\n  PaymentMethod: state.PaymentMethod\n});\n\nconst mapDispatchToProps = {\n  showDialog,\n  clearDialog,\n  showSnackbar\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmationDialogPaymentMethod);","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/components/ConfirmationDialogPaymentMethod.js"],"names":["React","Component","PropTypes","Router","Dialog","DialogContent","CircularProgress","connect","Grid","axios","showDialog","clearDialog","showSnackbar","ButtonMain","AuthNetworkCall","isNotUndefined","ConfirmationDialogPaymentMethod","constructor","props","state","isLoading","handleClose","createOrder","itemCartId","paymentMethodId","setState","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","headers","Authorization","JSON","parse","localStorage","getItem","access_token","data","stringify","cart_id","payment_method_id","post","then","apiResponse","response","result","code","push","id","catch","error","user_errors","toString","render","dialogOpen","groupPayment","paymentLogo","paymentId","PaymentMethod","position","left","propTypes","func","isRequired","shape","bool","string","number","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Router from 'next/router';\n\n// Material\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n// Redux\nimport { connect } from 'react-redux';\nimport Grid from '@material-ui/core/Grid';\n\nimport axios from 'axios';\nimport { showDialog, clearDialog } from '../redux/paymentMethod/action';\nimport { showSnackbar } from '../redux/snackbar/action';\n\n// Component\nimport ButtonMain from './global-component/ButtonMain';\nimport { AuthNetworkCall } from '../utils/NetworkCall';\nimport { isNotUndefined } from '../utils/Validator';\n\nexport class ConfirmationDialogPaymentMethod extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n    };\n  }\n\n  handleClose() {\n    this.props.clearDialog();\n  }\n\n  /**\n   * @summary tidak menggunakan helper karena kondisi khusus\n   * @param itemCartId\n   * @param paymentMethodId\n   * @returns {Promise<void>}\n   */\n  async createOrder(itemCartId, paymentMethodId) {\n    this.setState({ isLoading: true });\n    const { showSnackbar } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/order`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`,\n    };\n    const data = JSON.stringify({\n      cart_id: itemCartId,\n      payment_method_id: paymentMethodId,\n    });\n\n    await axios\n      .post(url, data, { headers })\n      .then(async (apiResponse) => {\n        const { response, result } = apiResponse.data;\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n          this.setState({ isLoading: false });\n        } else {\n          await Router.push(`/status-pembayaran/${result.id}`);\n        }\n      }).catch((error) => {\n        if (isNotUndefined(error.response)) {\n          const { data } = error.response;\n          // ada item expired\n          if (data.response.code === '000012') {\n            showSnackbar(data.response.user_errors, 'error', true);\n          } else showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n      });\n    this.setState({ isLoading: false });\n    this.handleClose();\n  }\n\n  render() {\n    const {\n      dialogOpen, groupPayment, paymentLogo, paymentId, itemCartId,\n    } = this.props.PaymentMethod;\n    const { isLoading } = this.state;\n    return (\n      <Dialog\n        disableBackdropClick\n        open={dialogOpen}\n        fullWidth\n        maxWidth=\"xs\"\n      >\n        <DialogContent>\n          <p className=\"font-muli-18 bold\">Konfirmasi</p>\n          <p className=\"font-muli-14 margin-btm-16\">Apakah anda yakin ingin menggunakan :</p>\n          <p className=\"font-muli-14 margin-btm-16\">{groupPayment}</p>\n          <img src={paymentLogo} className=\"payment-method-diaglog-image margin-btm-32\" />\n\n          {isLoading ? (\n            <CircularProgress style={{ position: 'sticky', left: '47%' }} />\n          ) : (\n            <Grid\n              container\n              direction=\"row\"\n              justify=\"space-between\"\n              spacing={2}\n            >\n              <Grid item xs={6}>\n                <ButtonMain id=\"btnClose\" onClick={() => this.handleClose()} color=\"secondary\" width=\"fullWidth\">Kembali</ButtonMain>\n              </Grid>\n              <Grid item xs={6}>\n                <ButtonMain id=\"btnNext\" onClick={() => this.createOrder(itemCartId, paymentId)} color=\"primary\" width=\"fullWidth\">Lanjutkan</ButtonMain>\n              </Grid>\n            </Grid>\n          )}\n\n        </DialogContent>\n\n      </Dialog>\n\n    );\n  }\n}\nConfirmationDialogPaymentMethod.propTypes = {\n  clearDialog: PropTypes.func.isRequired,\n  PaymentMethod: PropTypes.shape({\n    dialogOpen: PropTypes.bool,\n    groupPayment: PropTypes.string,\n    paymentLogo: PropTypes.string,\n    paymentId: PropTypes.number,\n    itemCartId: PropTypes.string,\n  }).isRequired,\n};\nconst mapStateToProps = (state) => ({\n  PaymentMethod: state.PaymentMethod,\n});\n\nconst mapDispatchToProps = {\n  showDialog, clearDialog, showSnackbar,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmationDialogPaymentMethod);\n"]},"metadata":{},"sourceType":"module"}