{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router'; // Material\n\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ProductCard from '../components/global-component/ProductCard'; // Component\n\nimport MainLogo from '../components/global-component/MainLogo';\nimport OfferingTagihan from '../components/beranda/OfferingTagihan'; // redux / network\n\nimport { featureEnable } from '../utils/Flagr';\nimport { AuthNetworkCall, CommonNetworkCall, isUserLoggedValid } from '../utils/NetworkCall';\nimport { showSnackbar } from '../redux/snackbar/action';\nimport { isNotUndefinedAndNotEmpty } from '../utils/Validator';\nimport { additionalProductURL } from '../utils/MappingIdToUrl';\nexport var Home = /*#__PURE__*/function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      userProfile: null,\n      isLoading: true,\n      additionalProduct: [],\n      enableAdditionalProduct: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var login;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                document.body.className = 'body-blue';\n                _context.next = 3;\n                return featureEnable(3);\n\n              case 3:\n                if (!_context.sent) {\n                  _context.next = 5;\n                  break;\n                }\n\n                document.location.href = 'https://info.bayartagihan.id/';\n\n              case 5:\n                this.getAdditionalProduct();\n                _context.next = 8;\n                return isUserLoggedValid();\n\n              case 8:\n                login = _context.sent;\n                this.setState({\n                  login: login\n                });\n                if (login === 'logged') this.getProfile();\n                if (login === 'expired') showSnackbar('Sesi anda telah habis, silahkan masuk untuk bertransaksi', 'error');\n                if (login === 'inactive') showSnackbar('Akun anda terblokir atau tidak aktif, silahkan masuk dengan akun lain', 'error');\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.body.className = null;\n    }\n  }, {\n    key: \"onClickProduct\",\n    value: function onClickProduct(item) {\n      if (!this.state.enableAdditionalProduct) {\n        this.props.showSnackbar('Produk belum bisa dibei untuk saat ini', 'info');\n      } else if (this.state.login !== 'logged') {\n        this.props.showSnackbar('Silahkan masuk untuk membeli produk', 'error');\n      } else Router.push(\"\".concat(additionalProductURL(item.id)));\n    }\n  }, {\n    key: \"getAdditionalProduct\",\n    value: function () {\n      var _getAdditionalProduct = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setState({\n                  isLoading: true\n                });\n                _context2.t0 = this;\n                _context2.next = 4;\n                return CommonNetworkCall('/product_type/available/atur_tagihan?is_special__equals=0', 'get', this.props.showSnackbar);\n\n              case 4:\n                _context2.t1 = _context2.sent;\n                _context2.t2 = {\n                  additionalProduct: _context2.t1\n                };\n\n                _context2.t0.setState.call(_context2.t0, _context2.t2);\n\n                this.setState({\n                  enableAdditionalProduct: true\n                });\n                this.setState({\n                  isLoading: false\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getAdditionalProduct() {\n        return _getAdditionalProduct.apply(this, arguments);\n      }\n\n      return getAdditionalProduct;\n    }()\n  }, {\n    key: \"getProfile\",\n    value: function () {\n      var _getProfile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = this;\n                _context3.next = 3;\n                return AuthNetworkCall('/customer/profile', 'get', this.props.showSnackbar);\n\n              case 3:\n                _context3.t1 = _context3.sent;\n                _context3.t2 = {\n                  userProfile: _context3.t1\n                };\n\n                _context3.t0.setState.call(_context3.t0, _context3.t2);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getProfile() {\n        return _getProfile.apply(this, arguments);\n      }\n\n      return getProfile;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          userProfile = _this$state.userProfile,\n          isLoading = _this$state.isLoading,\n          additionalProduct = _this$state.additionalProduct;\n\n      var loginButton = __jsx(\"span\", {\n        id: \"loginButton\",\n        className: \"signup-login pointer\",\n        onClick: function onClick() {\n          return Router.push('/login');\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-12 bold\"\n      }, \"Daftar / Login\"));\n\n      var loggedUser = __jsx(\"div\", {\n        className: \"right-top flex \"\n      }, __jsx(\"span\", {\n        id: \"btnProfile\",\n        className: \"txt-center-ver flex white pointer font-muli-12 \",\n        onClick: function onClick() {\n          return Router.push('/akun');\n        }\n      }, __jsx(\"b\", null, \"Halo, \\xA0\"), userProfile ? userProfile.nick_name : null, \"\\xA0\", __jsx(AccountCircleIcon, null)), __jsx(\"img\", {\n        id: \"btnKeranjang\",\n        src: \"/icon/ic_cart_homepage.svg\",\n        className: \"margin-left-16 pointer \",\n        height: 30,\n        onClick: function onClick() {\n          return Router.push('/keranjang');\n        }\n      }));\n\n      return __jsx(\"div\", {\n        id: \"beranda\"\n      }, __jsx(MainLogo, null), __jsx(\"br\", null), __jsx(\"div\", {\n        className: \"margin-top-16\"\n      }, __jsx(\"span\", {\n        className: \"coming-soon font-muli-14\"\n      }, __jsx(\"img\", {\n        src: \"/icon/ic_time_small.png\",\n        width: \"12px\",\n        className: \"margin-rgt-4\"\n      }), \"Segera Hadir\")), !isLoading && userProfile ? loggedUser : null, !isLoading && !userProfile ? loginButton : null, __jsx(\"div\", {\n        className: \"margin-rgt-16 margin-left-16 margin-btm-24 margin-top-16 \"\n      }, __jsx(\"p\", {\n        className: \"font-muli-300 white\"\n      }, __jsx(\"span\", {\n        className: \"font-muli-800 orange\"\n      }, \"Mengatur\"), ' ', \"dan\", ' ', __jsx(\"span\", {\n        className: \"font-muli-800 orange\"\n      }, \"membayar\"), ' ', \"semua tagihan anda dalam satu platform\")), __jsx(\"div\", {\n        className: \"horizontal-scroll padding-rgt-lft-16 \"\n      }, __jsx(OfferingTagihan, {\n        title: \"Tagihan Bulanan\",\n        products: ['/icon/beranda/ic_beranda_call.png', '/icon/beranda/ic_beranda_electric.png', '/icon/beranda/ic_beranda_network.png']\n      }), __jsx(OfferingTagihan, {\n        title: \"Tagihan Digital\",\n        products: ['/icon/beranda/ic_beranda_netflix.png', '/icon/beranda/ic_beranda_others.png', '/icon/beranda/ic_beranda_spotify.png']\n      })), __jsx(\"div\", {\n        className: \"margin-top-24 margin-rgt-16 margin-left-16\",\n        style: {\n          maxWidth: 500\n        }\n      }, __jsx(\"p\", {\n        className: \"font-muli-14 bold margin-btm-16\"\n      }, \"Produk Tersedia\"), isLoading ? __jsx(\"div\", {\n        className: \"flex justify-center\"\n      }, __jsx(CircularProgress, null)) : __jsx(\"div\", null, __jsx(Grid, {\n        container: true,\n        spacing: 1\n      }, isNotUndefinedAndNotEmpty(additionalProduct) ? additionalProduct.map(function (item) {\n        return __jsx(Grid, {\n          item: true,\n          xs: 4\n        }, __jsx(ProductCard, {\n          id: \"product\".concat(item.id),\n          title: item.name,\n          logo: item.icon,\n          large: true,\n          onClick: function onClick() {\n            return _this2.onClickProduct(item);\n          }\n        }));\n      }) : null))));\n    }\n  }]);\n\n  return Home;\n}(Component);\nvar mapDispatchToProps = {\n  showSnackbar: showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(Home);","map":null,"metadata":{},"sourceType":"module"}