{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport GoogleLogin from 'react-google-login'; // material\n\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider'; // component\n\nimport { connect } from 'react-redux';\nimport ButtonBack from '../../components/global-component/ButtonBack'; // redux\n\nimport { showSnackbar } from '../../redux/snackbar/action';\nimport { BlockDialog } from '../../components/global-component/BlockDialog';\nimport { CommonNetworkCall } from '../../utils/NetworkCall';\nexport class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false\n    };\n  }\n  /**\n   *  @summary this method mapping google response and get token then post it to backend, if success\n   *  the response google data will be saved on local\n   *  BE do validating to token given\n   * */\n\n\n  async onSuccessLogin(responseGoogle) {\n    this.setState({\n      isLoading: true\n    });\n    const data = JSON.stringify({\n      access_token: responseGoogle.accessToken,\n      token_id: responseGoogle.tokenId\n    });\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    const result = await CommonNetworkCall('/customer/auth/social_login/google', 'post', this.props.showSnackbar, data, headers);\n    this.setState({\n      isLoading: false\n    });\n\n    if (result) {\n      localStorage.setItem('token', JSON.stringify(result)); // localStorage.setItem('profile', JSON.stringify(responseGoogle.profileObj));\n\n      if (Router.query.ref) Router.push(Router.query.ref); // else Router.push('/akun');\n      else Router.back();\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"main-content\",\n      id: \"mainContent\"\n    }, __jsx(ButtonBack, {\n      id: \"btnBack\",\n      onClick: () => Router.back()\n    }), __jsx(Divider, null), __jsx(\"div\", {\n      className: \"txt-center-hoz font-muli-16\",\n      style: {\n        marginTop: '130px'\n      }\n    }, __jsx(\"p\", null, \"Hi...\"), __jsx(\"p\", null, \"Selamat datang di BayarTagihan\")), __jsx(\"div\", {\n      className: \"txt-center-hoz pointer margin-top-36 margin-btm-24\"\n    }, __jsx(GoogleLogin, {\n      clientId: process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID,\n      render: renderProps => __jsx(Button, {\n        variant: \"outlined\",\n        startIcon: __jsx(\"img\", {\n          width: 16,\n          src: \"/icon/ic_google.png\"\n        }),\n        size: \"large\",\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        style: {\n          textTransform: 'none'\n        }\n      }, __jsx(\"span\", {\n        className: \"font-muli-14 bold\"\n      }, \"Masuk atau daftar dengan Google\")),\n      onSuccess: responseGoogle => this.onSuccessLogin(responseGoogle) // onFailure={responseGoogle}\n      ,\n      cookiePolicy: \"single_host_origin\"\n    }), __jsx(BlockDialog, {\n      isOpen: this.state.isLoading\n    })));\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(Login);","map":null,"metadata":{},"sourceType":"module"}