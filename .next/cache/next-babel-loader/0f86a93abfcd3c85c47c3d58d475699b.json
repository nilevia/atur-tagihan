{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator'; // notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default function CommonNetworkCall(_x, _x2) {\n  return _CommonNetworkCall.apply(this, arguments);\n}\n_c2 = CommonNetworkCall;\n\nfunction _CommonNetworkCall() {\n  _CommonNetworkCall = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(path, method) {\n    var data,\n        headers,\n        showSnackbar,\n        BASE_URL,\n        url,\n        _axios,\n        _args3 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            data = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : '';\n            headers = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : {};\n            showSnackbar = _args3.length > 4 ? _args3[4] : undefined;\n            BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n            url = \"\".concat(BASE_URL).concat(path);\n            _context3.t0 = method;\n            _context3.next = _context3.t0 === 'get' ? 8 : _context3.t0 === 'post' ? 10 : _context3.t0 === 'delete' ? 12 : _context3.t0 === 'put' ? 14 : 16;\n            break;\n\n          case 8:\n            _axios = axios.get(url);\n            return _context3.abrupt(\"break\", 17);\n\n          case 10:\n            _axios = axios.post(url, data, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 17);\n\n          case 12:\n            _axios = axios[\"delete\"](url, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 17);\n\n          case 14:\n            _axios = axios.put(url, data, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 17);\n\n          case 16:\n            _axios = axios();\n\n          case 17:\n            _context3.next = 19;\n            return _axios.then( /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(apiResponse) {\n                var _apiResponse$data, response, result;\n\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _apiResponse$data = apiResponse.data, response = _apiResponse$data.response, result = _apiResponse$data.result;\n\n                        if (!(response.code !== '000000')) {\n                          _context.next = 4;\n                          break;\n                        }\n\n                        showSnackbar('Terjadi Gangguan', 'error');\n                        return _context.abrupt(\"return\", null);\n\n                      case 4:\n                        return _context.abrupt(\"return\", result);\n\n                      case 5:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x3) {\n                return _ref.apply(this, arguments);\n              };\n            }())[\"catch\"]( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(error) {\n                var _data;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (isNotUndefined(error.response)) {\n                          _data = error.response.data;\n                          showSnackbar(_data.response.user_errors, 'error');\n                        } else {\n                          showSnackbar(error.toString(), 'error');\n                        }\n\n                        return _context2.abrupt(\"return\", null);\n\n                      case 2:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x4) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n\n          case 19:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _CommonNetworkCall.apply(this, arguments);\n}\n\n_c = CommonNetworkCall;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommonNetworkCall\");\n$RefreshReg$(_c2, \"CommonNetworkCall\");","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/utils/CommonNetworkCall.js"],"names":["React","axios","isNotUndefined","CommonNetworkCall","path","method","data","headers","showSnackbar","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","_axios","get","post","put","then","apiResponse","response","result","code","error","user_errors","toString"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,aAA/B,C,CAEA;AACA;;AAEA,wBAA8BC,iBAA9B;AAAA;AAAA;MAA8BA,iB;;;gFAAf,kBAAiCC,IAAjC,EAAuCC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA+CC,YAAAA,IAA/C,8DAAsD,EAAtD;AAA0DC,YAAAA,OAA1D,8DAAoE,EAApE;AAAwEC,YAAAA,YAAxE;AACPC,YAAAA,QADO,GACIC,OAAO,CAACC,GAAR,CAAYC,wBADhB;AAEPC,YAAAA,GAFO,aAEEJ,QAFF,SAEaL,IAFb;AAAA,2BAKLC,MALK;AAAA,8CAMN,KANM,wBASN,MATM,yBAYN,QAZM,yBAeN,KAfM;AAAA;;AAAA;AAOTS,YAAAA,MAAM,GAAGb,KAAK,CAACc,GAAN,CAAUF,GAAV,CAAT;AAPS;;AAAA;AAUTC,YAAAA,MAAM,GAAGb,KAAK,CAACe,IAAN,CAAWH,GAAX,EAAgBP,IAAhB,EAAsB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAAtB,CAAT;AAVS;;AAAA;AAaTO,YAAAA,MAAM,GAAGb,KAAK,UAAL,CAAaY,GAAb,EAAkB;AAAEN,cAAAA,OAAO,EAAPA;AAAF,aAAlB,CAAT;AAbS;;AAAA;AAgBTO,YAAAA,MAAM,GAAGb,KAAK,CAACgB,GAAN,CAAUJ,GAAV,EAAeP,IAAf,EAAqB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAArB,CAAT;AAhBS;;AAAA;AAmBTO,YAAAA,MAAM,GAAGb,KAAK,EAAd;;AAnBS;AAAA;AAAA,mBAqBPa,MAAM,CACTI,IADG;AAAA,kFACE,iBAAOC,WAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4CACyBA,WAAW,CAACb,IADrC,EACIc,QADJ,qBACIA,QADJ,EACcC,MADd,qBACcA,MADd;;AAAA,8BAGAD,QAAQ,CAACE,IAAT,KAAkB,QAHlB;AAAA;AAAA;AAAA;;AAIFd,wBAAAA,YAAY,CAAC,kBAAD,EAAqB,OAArB,CAAZ;AAJE,yDAKK,IALL;;AAAA;AAAA,yDAOGa,MAPH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF;;AAAA;AAAA;AAAA;AAAA;AAAA,mFAUG,kBAAOE,KAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACL,4BAAIrB,cAAc,CAACqB,KAAK,CAACH,QAAP,CAAlB,EAAoC;AAC1Bd,0BAAAA,KAD0B,GACjBiB,KAAK,CAACH,QADW,CAC1Bd,IAD0B;AAElCE,0BAAAA,YAAY,CAACF,KAAI,CAACc,QAAL,CAAcI,WAAf,EAA4B,OAA5B,CAAZ;AACD,yBAHD,MAGO;AACLhB,0BAAAA,YAAY,CAACe,KAAK,CAACE,QAAN,EAAD,EAAmB,OAAnB,CAAZ;AACD;;AANI,0DAOE,IAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAVH;;AAAA;AAAA;AAAA;AAAA,gBArBO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;KAAetB,iB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator';\n\n// notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default async function CommonNetworkCall(path, method, data = '', headers = {}, showSnackbar) {\n  const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n  const url = `${BASE_URL}${path}`;\n\n  let _axios;\n  switch (method) {\n    case 'get':\n      _axios = axios.get(url);\n      break;\n    case 'post':\n      _axios = axios.post(url, data, { headers });\n      break;\n    case 'delete':\n      _axios = axios.delete(url, { headers });\n      break;\n    case 'put':\n      _axios = axios.put(url, data, { headers });\n      break;\n    default:\n      _axios = axios();\n  }\n  await _axios\n    .then(async (apiResponse) => {\n      const { response, result } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        return null;\n      }\n      return result;\n    })\n    .catch(async (error) => {\n      if (isNotUndefined(error.response)) {\n        const { data } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n      return null;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}