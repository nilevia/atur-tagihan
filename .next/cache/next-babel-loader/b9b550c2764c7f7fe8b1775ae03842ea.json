{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator'; // notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default function CommonNetworkCall(_x, _x2) {\n  return _CommonNetworkCall.apply(this, arguments);\n}\n_c2 = CommonNetworkCall;\n\nfunction _CommonNetworkCall() {\n  _CommonNetworkCall = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(path, method) {\n    var data,\n        headers,\n        showSnackbar,\n        BASE_URL,\n        url,\n        _axios,\n        _args3 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            data = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : '';\n            headers = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : {};\n            showSnackbar = _args3.length > 4 ? _args3[4] : undefined;\n            BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n            url = \"\".concat(BASE_URL).concat(path);\n            console.log('hm');\n            _context3.t0 = method;\n            _context3.next = _context3.t0 === 'get' ? 9 : _context3.t0 === 'post' ? 11 : _context3.t0 === 'delete' ? 13 : _context3.t0 === 'put' ? 15 : 17;\n            break;\n\n          case 9:\n            _axios = axios.get(url);\n            return _context3.abrupt(\"break\", 18);\n\n          case 11:\n            _axios = axios.post(url, data, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 18);\n\n          case 13:\n            _axios = axios[\"delete\"](url, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 18);\n\n          case 15:\n            _axios = axios.put(url, data, {\n              headers: headers\n            });\n            return _context3.abrupt(\"break\", 18);\n\n          case 17:\n            _axios = axios();\n\n          case 18:\n            _context3.next = 20;\n            return _axios.then( /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(apiResponse) {\n                var _apiResponse$data, response, result;\n\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _apiResponse$data = apiResponse.data, response = _apiResponse$data.response, result = _apiResponse$data.result;\n\n                        if (!(response.code !== '000000')) {\n                          _context.next = 5;\n                          break;\n                        }\n\n                        showSnackbar('Terjadi Gangguan', 'error');\n                        console.log('ah');\n                        return _context.abrupt(\"return\", null);\n\n                      case 5:\n                        console.log('ugh');\n                        return _context.abrupt(\"return\", result);\n\n                      case 7:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x3) {\n                return _ref.apply(this, arguments);\n              };\n            }())[\"catch\"]( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(error) {\n                var _data;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (isNotUndefined(error.response)) {\n                          _data = error.response.data;\n                          showSnackbar(_data.response.user_errors, 'error');\n                        } else {\n                          showSnackbar(error.toString(), 'error');\n                        }\n\n                        console.log('ew');\n                        return _context2.abrupt(\"return\", null);\n\n                      case 3:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x4) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _CommonNetworkCall.apply(this, arguments);\n}\n\n_c = CommonNetworkCall;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommonNetworkCall\");\n$RefreshReg$(_c2, \"CommonNetworkCall\");","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/utils/CommonNetworkCall.js"],"names":["React","axios","isNotUndefined","CommonNetworkCall","path","method","data","headers","showSnackbar","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","console","log","_axios","get","post","put","then","apiResponse","response","result","code","error","user_errors","toString"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,aAA/B,C,CAEA;AACA;;AAEA,wBAA8BC,iBAA9B;AAAA;AAAA;MAA8BA,iB;;;gFAAf,kBAAiCC,IAAjC,EAAuCC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA+CC,YAAAA,IAA/C,8DAAsD,EAAtD;AAA0DC,YAAAA,OAA1D,8DAAoE,EAApE;AAAwEC,YAAAA,YAAxE;AACPC,YAAAA,QADO,GACIC,OAAO,CAACC,GAAR,CAAYC,wBADhB;AAEPC,YAAAA,GAFO,aAEEJ,QAFF,SAEaL,IAFb;AAGbU,YAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AAHa,2BAMLV,MANK;AAAA,8CAON,KAPM,wBAUN,MAVM,yBAaN,QAbM,yBAgBN,KAhBM;AAAA;;AAAA;AAQTW,YAAAA,MAAM,GAAGf,KAAK,CAACgB,GAAN,CAAUJ,GAAV,CAAT;AARS;;AAAA;AAWTG,YAAAA,MAAM,GAAGf,KAAK,CAACiB,IAAN,CAAWL,GAAX,EAAgBP,IAAhB,EAAsB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAAtB,CAAT;AAXS;;AAAA;AAcTS,YAAAA,MAAM,GAAGf,KAAK,UAAL,CAAaY,GAAb,EAAkB;AAAEN,cAAAA,OAAO,EAAPA;AAAF,aAAlB,CAAT;AAdS;;AAAA;AAiBTS,YAAAA,MAAM,GAAGf,KAAK,CAACkB,GAAN,CAAUN,GAAV,EAAeP,IAAf,EAAqB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAArB,CAAT;AAjBS;;AAAA;AAoBTS,YAAAA,MAAM,GAAGf,KAAK,EAAd;;AApBS;AAAA;AAAA,mBAsBPe,MAAM,CACTI,IADG;AAAA,kFACE,iBAAOC,WAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4CACyBA,WAAW,CAACf,IADrC,EACIgB,QADJ,qBACIA,QADJ,EACcC,MADd,qBACcA,MADd;;AAAA,8BAGAD,QAAQ,CAACE,IAAT,KAAkB,QAHlB;AAAA;AAAA;AAAA;;AAIFhB,wBAAAA,YAAY,CAAC,kBAAD,EAAqB,OAArB,CAAZ;AACAM,wBAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AALE,yDAMK,IANL;;AAAA;AAQJD,wBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AARI,yDASGQ,MATH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF;;AAAA;AAAA;AAAA;AAAA;AAAA,mFAYG,kBAAOE,KAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACL,4BAAIvB,cAAc,CAACuB,KAAK,CAACH,QAAP,CAAlB,EAAoC;AAC1BhB,0BAAAA,KAD0B,GACjBmB,KAAK,CAACH,QADW,CAC1BhB,IAD0B;AAElCE,0BAAAA,YAAY,CAACF,KAAI,CAACgB,QAAL,CAAcI,WAAf,EAA4B,OAA5B,CAAZ;AACD,yBAHD,MAGO;AACLlB,0BAAAA,YAAY,CAACiB,KAAK,CAACE,QAAN,EAAD,EAAmB,OAAnB,CAAZ;AACD;;AACDb,wBAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AAPK,0DAQE,IARF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAZH;;AAAA;AAAA;AAAA;AAAA,gBAtBO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;KAAeZ,iB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator';\n\n// notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan parameter dan disupply dari component\n\nexport default async function CommonNetworkCall(path, method, data = '', headers = {}, showSnackbar) {\n  const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n  const url = `${BASE_URL}${path}`;\n  console.log('hm');\n\n  let _axios;\n  switch (method) {\n    case 'get':\n      _axios = axios.get(url);\n      break;\n    case 'post':\n      _axios = axios.post(url, data, { headers });\n      break;\n    case 'delete':\n      _axios = axios.delete(url, { headers });\n      break;\n    case 'put':\n      _axios = axios.put(url, data, { headers });\n      break;\n    default:\n      _axios = axios();\n  }\n  await _axios\n    .then(async (apiResponse) => {\n      const { response, result } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        console.log('ah');\n        return null;\n      }\n      console.log('ugh');\n      return result;\n    })\n    .catch(async (error) => {\n      if (isNotUndefined(error.response)) {\n        const { data } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n      console.log('ew');\n      return null;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}