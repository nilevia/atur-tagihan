{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router'; // Material\n\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ProductCard from '../components/global-component/ProductCard'; // Component\n\nimport MainLogo from '../components/global-component/MainLogo';\nimport OfferingTagihan from '../components/beranda/OfferingTagihan'; // redux / network\n\nimport { featureEnable } from '../utils/Flagr';\nimport { AuthNetworkCall, CommonNetworkCall, isUserLoggedValid } from '../utils/NetworkCall';\nimport { showSnackbar } from '../redux/snackbar/action';\nimport { isNotUndefinedAndNotEmpty } from '../utils/Validator';\nimport { additionalProductURL } from '../utils/MappingIdToUrl';\nexport class Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userProfile: null,\n      isLoading: true,\n      additionalProduct: [],\n      enableAdditionalProduct: false\n    };\n  }\n\n  async componentDidMount() {\n    document.body.className = 'body-blue';\n\n    if (await featureEnable(3)) {\n      document.location.href = 'https://info.bayartagihan.id/';\n    }\n\n    this.getAdditionalProduct();\n    const login = await isUserLoggedValid();\n    this.setState({\n      login\n    });\n    if (login === 'logged') this.getProfile();\n    if (login === 'expired') showSnackbar('Sesi anda telah habis, silahkan masuk untuk bertransaksi', 'error');\n    if (login === 'inactive') showSnackbar('Akun anda terblokir atau tidak aktif, silahkan masuk dengan akun lain', 'error');\n  }\n\n  componentWillUnmount() {\n    document.body.className = null;\n  }\n\n  onClickProduct(item) {\n    if (!this.state.enableAdditionalProduct) {\n      this.props.showSnackbar('Produk belum bisa dibei untuk saat ini', 'info');\n    } else if (this.state.login !== 'logged') {\n      this.props.showSnackbar('Silahkan masuk untuk membeli produk', 'error');\n    } else Router.push(`${additionalProductURL(item.id)}`);\n  }\n\n  async getAdditionalProduct() {\n    this.setState({\n      isLoading: true\n    });\n    this.setState({\n      additionalProduct: await CommonNetworkCall('/product_type/available/atur_tagihan?is_special__equals=0', 'get', this.props.showSnackbar)\n    });\n    this.setState({\n      enableAdditionalProduct: true\n    });\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  async getProfile() {\n    this.setState({\n      userProfile: await AuthNetworkCall('/customer/profile', 'get', this.props.showSnackbar)\n    });\n  }\n\n  render() {\n    const {\n      userProfile,\n      isLoading,\n      additionalProduct\n    } = this.state;\n\n    const loginButton = __jsx(\"span\", {\n      id: \"loginButton\",\n      className: \"signup-login pointer\",\n      onClick: () => Router.push('/login')\n    }, __jsx(\"p\", {\n      className: \"font-muli-12 bold\"\n    }, \"Daftar / Login\"));\n\n    const loggedUser = __jsx(\"div\", {\n      className: \"right-top flex \"\n    }, __jsx(\"span\", {\n      id: \"btnProfile\",\n      className: \"txt-center-ver flex white pointer font-muli-12 \",\n      onClick: () => Router.push('/akun')\n    }, __jsx(\"b\", null, \"Halo, \\xA0\"), userProfile ? userProfile.nick_name : null, \"\\xA0\", __jsx(AccountCircleIcon, null)), __jsx(\"img\", {\n      id: \"btnKeranjang\",\n      src: \"/icon/ic_cart_homepage.svg\",\n      className: \"margin-left-16 pointer \",\n      height: 30,\n      onClick: () => Router.push('/keranjang')\n    }));\n\n    return __jsx(\"div\", {\n      id: \"beranda\"\n    }, __jsx(MainLogo, null), __jsx(\"br\", null), __jsx(\"div\", {\n      className: \"margin-top-16\"\n    }, __jsx(\"span\", {\n      className: \"coming-soon font-muli-14\"\n    }, __jsx(\"img\", {\n      src: \"/icon/ic_time_small.png\",\n      width: \"12px\",\n      className: \"margin-rgt-4\"\n    }), \"Segera Hadir\")), !isLoading && userProfile ? loggedUser : null, !isLoading && !userProfile ? loginButton : null, __jsx(\"div\", {\n      className: \"margin-rgt-16 margin-left-16 margin-btm-24 margin-top-16 \"\n    }, __jsx(\"p\", {\n      className: \"font-muli-300 white\"\n    }, __jsx(\"span\", {\n      className: \"font-muli-800 orange\"\n    }, \"Mengatur\"), ' ', \"dan\", ' ', __jsx(\"span\", {\n      className: \"font-muli-800 orange\"\n    }, \"membayar\"), ' ', \"semua tagihan anda dalam satu platform\")), __jsx(\"div\", {\n      className: \"horizontal-scroll padding-rgt-lft-16 \"\n    }, __jsx(OfferingTagihan, {\n      title: \"Tagihan Bulanan\",\n      products: ['/icon/beranda/ic_beranda_call.png', '/icon/beranda/ic_beranda_electric.png', '/icon/beranda/ic_beranda_network.png']\n    }), __jsx(OfferingTagihan, {\n      title: \"Tagihan Digital\",\n      products: ['/icon/beranda/ic_beranda_netflix.png', '/icon/beranda/ic_beranda_others.png', '/icon/beranda/ic_beranda_spotify.png']\n    })), __jsx(\"div\", {\n      className: \"margin-top-24 margin-rgt-16 margin-left-16\",\n      style: {\n        maxWidth: 500\n      }\n    }, __jsx(\"p\", {\n      className: \"font-muli-14 bold margin-btm-16\"\n    }, \"Produk Tersedia\"), isLoading ? __jsx(\"div\", {\n      className: \"flex justify-center\"\n    }, __jsx(CircularProgress, null)) : __jsx(\"div\", null, __jsx(Grid, {\n      container: true,\n      spacing: 1\n    }, isNotUndefinedAndNotEmpty(additionalProduct) ? additionalProduct.map(item => __jsx(Grid, {\n      item: true,\n      xs: 4\n    }, __jsx(ProductCard, {\n      id: `product${item.id}`,\n      title: item.name,\n      logo: item.icon,\n      large: true,\n      onClick: () => this.onClickProduct(item)\n    }))) : null))));\n  }\n\n}\nconst mapDispatchToProps = {\n  showSnackbar\n};\nexport default connect(null, mapDispatchToProps)(Home);","map":null,"metadata":{},"sourceType":"module"}