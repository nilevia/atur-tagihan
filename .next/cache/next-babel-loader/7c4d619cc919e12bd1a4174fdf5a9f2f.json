{"ast":null,"code":"var _jsxFileName = \"/Users/otnielvictoryfa/task2020/atur-tagihan/pages/detail-tagihan/[order_id]/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport Router from 'next/router'; // material\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Dialog from '@material-ui/core/Dialog';\nimport CircularProgress from '@material-ui/core/CircularProgress'; // component\n\nimport { connect } from 'react-redux';\nimport Divider from '@material-ui/core/Divider';\nimport ButtonNavigationPay from '../../../components/global-component/ButtonNavigationPay';\nimport ProductCard from '../../../components/global-component/ProductCard';\nimport MainLogo from '../../../components/global-component/MainLogo';\nimport CompanyLogo from '../../../components/global-component/CompanyLogo';\nimport { getRupiah } from '../../../utils/Calculate';\nimport { getHashUrl } from '../../../utils/CommonUtils';\nimport PaymentMethod from '../../../components/PaymentMethod';\nimport BasicConfirmationDialog from '../../../components/global-component/BasicConfirmationDialog';\nimport ButtonMain from '../../../components/global-component/ButtonMain'; // redux\n\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { isNotUndefined } from '../../../utils/Validator';\nimport ProductOrderDetail from '../../../components/status-pembayaran/ProductOrderDetail';\nimport { showDialogOrderDetail } from '../../../redux/productOrderDetail/action';\nimport { showConfirmationDialog } from '../../../redux/basicConfimationDialog/action';\nimport { additionalProductURL } from '../../../utils/MappingIdToUrl';\nimport { AuthNetworkCall, isUserLoggedValid } from '../../../utils/NetworkCall';\nimport CustomDialog from '../../../components/global-component/CustomDialog';\nexport class DetailTagihan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true\n    };\n  }\n\n  async componentDidMount() {\n    document.body.className = 'body-blue';\n    const orderId = getHashUrl();\n    this.setState({\n      login: await isUserLoggedValid()\n    });\n\n    if (this.state.login === 'logged') {\n      this.inquiry(orderId);\n    }\n  }\n\n  componentWillUnmount() {\n    document.body.className = null;\n  }\n  /**\n   * @method Inquiry\n   * @summary do inquiry of bayartagihan product\n   * @param hash\n   * @returns {Promise<void>}\n   * @note gak pake helper karena banyak kondisi\n   */\n\n\n  async inquiry(hash) {\n    const {\n      showSnackbar\n    } = this.props;\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/inquiry/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`\n    };\n    const data = JSON.stringify({\n      order_identifier: hash\n    });\n    await axios.post(url, data, {\n      headers\n    }).then(async apiResponse => {\n      const {\n        response,\n        result\n      } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        this.setState({\n          isLoading: false\n        });\n      } else if (result.is_processed === 1) {\n        Router.push(`/status-pembayaran/${hash}`);\n        this.setState({\n          isLoading: false\n        });\n      } else {// Router.push('/keranjang');\n      }\n    }).catch(error => {\n      if (isNotUndefined(error.response)) {\n        const {\n          data\n        } = error.response;\n\n        if (data.response.code === '000007') {\n          Router.push('/url-not-found');\n        } // payment by b2b\n        else if (data.response.code === '000008') {\n            Router.push('/pembayaran-berhasil');\n          } else if (data.response.code === '000009') {\n            Router.push('/expired-bill');\n          }\n\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      isLoading,\n      login\n    } = this.state;\n    let dialogLogin;\n\n    if (login === 'empty' || login === 'expired' || login === 'inactive') {\n      let title;\n\n      switch (login) {\n        case 'expired':\n          title = 'Sesi Anda Telah Habis';\n          break;\n\n        case 'inactive':\n          title = 'Akun Anda Tidak Aktif atau Terblokir';\n          break;\n\n        default:\n          title = 'Pemberitahuan';\n      }\n\n      dialogLogin = __jsx(CustomDialog, {\n        title: title,\n        content: \"Silahkan login menggunakan akun google anda untuk melanjutkan transaksi ini.\" // cancelText=\"Lanjutkan tanpa login\"\n        ,\n        confirmText: \"Login\" // onCancel={() => localStorage.removeItem('token')}\n        ,\n        onConfirm: () => Router.push({\n          pathname: '/login',\n          query: {\n            ref: `/detail-tagihan/${this.state.orderId}`\n          }\n        }),\n        open: true,\n        mode: \"vertical\",\n        block: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, __jsx(MainLogo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }), isLoading ? __jsx(\"div\", {\n      className: \"flex txt-center-hoz padding-16 txt-center-ver\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    }, __jsx(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }), __jsx(\"p\", {\n      className: \"font-muli-14 margin margin-left-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, \"Sedang mengambil tagihan ...\")) : __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, \"Terjadi masalah ketika mengambil tagihan\"), __jsx(ButtonMain, {\n      color: \"primary\",\n      size: \"small\",\n      onClick: () => Router.push('/'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, \"Ke beranda\")), dialogLogin);\n  }\n\n}\nexport default DetailTagihan;","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/pages/detail-tagihan/[order_id]/index.js"],"names":["React","Component","moment","axios","Router","Paper","Grid","Dialog","CircularProgress","connect","Divider","ButtonNavigationPay","ProductCard","MainLogo","CompanyLogo","getRupiah","getHashUrl","PaymentMethod","BasicConfirmationDialog","ButtonMain","showSnackbar","isNotUndefined","ProductOrderDetail","showDialogOrderDetail","showConfirmationDialog","additionalProductURL","AuthNetworkCall","isUserLoggedValid","CustomDialog","DetailTagihan","constructor","props","state","isLoading","componentDidMount","document","body","className","orderId","setState","login","inquiry","componentWillUnmount","hash","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","headers","Authorization","JSON","parse","localStorage","getItem","access_token","data","stringify","order_identifier","post","then","apiResponse","response","result","code","is_processed","push","catch","error","user_errors","toString","render","dialogLogin","title","pathname","query","ref"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport Router from 'next/router';\n// material\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Dialog from '@material-ui/core/Dialog';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n// component\nimport { connect } from 'react-redux';\nimport Divider from '@material-ui/core/Divider';\nimport ButtonNavigationPay from '../../../components/global-component/ButtonNavigationPay';\nimport ProductCard from '../../../components/global-component/ProductCard';\nimport MainLogo from '../../../components/global-component/MainLogo';\nimport CompanyLogo from '../../../components/global-component/CompanyLogo';\nimport { getRupiah } from '../../../utils/Calculate';\nimport { getHashUrl } from '../../../utils/CommonUtils';\nimport PaymentMethod from '../../../components/PaymentMethod';\nimport BasicConfirmationDialog from '../../../components/global-component/BasicConfirmationDialog';\nimport ButtonMain from '../../../components/global-component/ButtonMain';\n\n// redux\nimport { showSnackbar } from '../../../redux/snackbar/action';\nimport { isNotUndefined } from '../../../utils/Validator';\nimport ProductOrderDetail from '../../../components/status-pembayaran/ProductOrderDetail';\nimport { showDialogOrderDetail } from '../../../redux/productOrderDetail/action';\nimport { showConfirmationDialog } from '../../../redux/basicConfimationDialog/action';\nimport { additionalProductURL } from '../../../utils/MappingIdToUrl';\nimport { AuthNetworkCall, isUserLoggedValid } from '../../../utils/NetworkCall';\nimport CustomDialog from '../../../components/global-component/CustomDialog';\n\nexport class DetailTagihan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n    };\n  }\n\n  async componentDidMount() {\n    document.body.className = 'body-blue';\n    const orderId = getHashUrl();\n    this.setState({ login: await isUserLoggedValid() });\n\n    if (this.state.login === 'logged') {\n      this.inquiry(orderId);\n    }\n  }\n\n  componentWillUnmount() {\n    document.body.className = null;\n  }\n\n  /**\n   * @method Inquiry\n   * @summary do inquiry of bayartagihan product\n   * @param hash\n   * @returns {Promise<void>}\n   * @note gak pake helper karena banyak kondisi\n   */\n  async inquiry(hash) {\n    const { showSnackbar } = this.props;\n\n    const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n    const url = `${BASE_URL}/inquiry/atur_tagihan`;\n    const headers = {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${JSON.parse(localStorage.getItem('token')).access_token}`,\n    };\n    const data = JSON.stringify({\n      order_identifier: hash,\n    });\n\n    await axios\n      .post(url, data, { headers })\n      .then(async (apiResponse) => {\n        const { response, result } = apiResponse.data;\n        if (response.code !== '000000') {\n          showSnackbar('Terjadi Gangguan', 'error');\n          this.setState({ isLoading: false });\n        } else if (result.is_processed === 1) {\n          Router.push(`/status-pembayaran/${hash}`);\n          this.setState({ isLoading: false });\n        } else {\n          // Router.push('/keranjang');\n        }\n      }).catch((error) => {\n        if (isNotUndefined(error.response)) {\n          const { data } = error.response;\n          if (data.response.code === '000007') {\n            Router.push('/url-not-found');\n          }\n          // payment by b2b\n          else if (data.response.code === '000008') {\n            Router.push('/pembayaran-berhasil');\n          } else if (data.response.code === '000009') {\n            Router.push('/expired-bill');\n          }\n          showSnackbar(data.response.user_errors, 'error');\n        } else {\n          showSnackbar(error.toString(), 'error');\n        }\n        this.setState({ isLoading: false });\n      });\n  }\n\n  render() {\n    const { isLoading, login } = this.state;\n\n    let dialogLogin;\n    if (login === 'empty' || login === 'expired' || login === 'inactive') {\n      let title;\n      switch (login) {\n        case 'expired':\n          title = 'Sesi Anda Telah Habis';\n          break;\n        case 'inactive':\n          title = 'Akun Anda Tidak Aktif atau Terblokir';\n          break;\n        default:\n          title = 'Pemberitahuan';\n      }\n      dialogLogin = (\n        <CustomDialog\n          title={title}\n          content=\"Silahkan login menggunakan akun google anda untuk melanjutkan transaksi ini.\"\n          // cancelText=\"Lanjutkan tanpa login\"\n          confirmText=\"Login\"\n          // onCancel={() => localStorage.removeItem('token')}\n          onConfirm={() => Router.push({ pathname: '/login', query: { ref: `/detail-tagihan/${this.state.orderId}` } })}\n          open\n          mode=\"vertical\"\n          block\n        />\n      );\n    }\n\n    return (\n      <div>\n        <MainLogo />\n        {isLoading ? (\n          <div className=\"flex txt-center-hoz padding-16 txt-center-ver\">\n            <CircularProgress />\n            <p className=\"font-muli-14 margin margin-left-16\">Sedang mengambil tagihan ...</p>\n          </div>\n        ) : (\n          <div>\n            <p>Terjadi masalah ketika mengambil tagihan</p>\n            <ButtonMain color=\"primary\" size=\"small\" onClick={() => Router.push('/')}>Ke beranda</ButtonMain>\n          </div>\n        )}\n        {dialogLogin}\n      </div>\n    );\n  }\n}\n\nexport default (DetailTagihan);\n"]},"metadata":{},"sourceType":"module"}