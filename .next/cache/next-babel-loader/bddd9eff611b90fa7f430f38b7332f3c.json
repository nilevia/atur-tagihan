{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator'; // notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan\n// parameter dan disupply dari component\n// unit test selanjutnya tidak perlu mengetes skenario error, hanya sukses\n\nexport default function CommonNetworkCall(_x, _x2, _x3) {\n  return _CommonNetworkCall.apply(this, arguments);\n}\n_c2 = CommonNetworkCall;\n\nfunction _CommonNetworkCall() {\n  _CommonNetworkCall = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(path, method, showSnackbar) {\n    var data,\n        headers,\n        BASE_URL,\n        url,\n        _axios,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = _args.length > 3 && _args[3] !== undefined ? _args[3] : '';\n            headers = _args.length > 4 && _args[4] !== undefined ? _args[4] : {};\n            BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n            url = \"\".concat(BASE_URL).concat(path);\n            _context.t0 = method;\n            _context.next = _context.t0 === 'get' ? 7 : _context.t0 === 'post' ? 9 : _context.t0 === 'delete' ? 11 : _context.t0 === 'put' ? 13 : 15;\n            break;\n\n          case 7:\n            _axios = axios.get(url);\n            return _context.abrupt(\"break\", 16);\n\n          case 9:\n            _axios = axios.post(url, data, {\n              headers: headers\n            });\n            return _context.abrupt(\"break\", 16);\n\n          case 11:\n            _axios = axios[\"delete\"](url, {\n              headers: headers\n            });\n            return _context.abrupt(\"break\", 16);\n\n          case 13:\n            _axios = axios.put(url, data, {\n              headers: headers\n            });\n            return _context.abrupt(\"break\", 16);\n\n          case 15:\n            _axios = axios();\n\n          case 16:\n            _context.next = 18;\n            return _axios.then(function (apiResponse) {\n              var _apiResponse$data = apiResponse.data,\n                  response = _apiResponse$data.response,\n                  result = _apiResponse$data.result;\n\n              if (response.code !== '000000') {\n                showSnackbar('Terjadi Gangguan', 'error');\n                return null;\n              }\n\n              return result;\n            })[\"catch\"](function (error) {\n              if (isNotUndefined(error.response)) {\n                var _data = error.response.data;\n                showSnackbar(_data.response.user_errors, 'error');\n              } else {\n                showSnackbar(error.toString(), 'error');\n              }\n\n              return null;\n            });\n\n          case 18:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _CommonNetworkCall.apply(this, arguments);\n}\n\n_c = CommonNetworkCall;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommonNetworkCall\");\n$RefreshReg$(_c2, \"CommonNetworkCall\");","map":{"version":3,"sources":["/Users/otnielvictoryfa/task2020/atur-tagihan/utils/CommonNetworkCall.js"],"names":["React","axios","isNotUndefined","CommonNetworkCall","path","method","showSnackbar","data","headers","BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","url","_axios","get","post","put","then","apiResponse","response","result","code","error","user_errors","toString"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,aAA/B,C,CAEA;AACA;AACA;AACA;;AAEA,wBAA8BC,iBAA9B;AAAA;AAAA;MAA8BA,iB;;;gFAAf,iBAAiCC,IAAjC,EAAuCC,MAAvC,EAA+CC,YAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA6DC,YAAAA,IAA7D,2DAAoE,EAApE;AAAwEC,YAAAA,OAAxE,2DAAkF,EAAlF;AACPC,YAAAA,QADO,GACIC,OAAO,CAACC,GAAR,CAAYC,wBADhB;AAEPC,YAAAA,GAFO,aAEEJ,QAFF,SAEaL,IAFb;AAAA,0BAKLC,MALK;AAAA,4CAMN,KANM,uBASN,MATM,uBAYN,QAZM,wBAeN,KAfM;AAAA;;AAAA;AAOTS,YAAAA,MAAM,GAAGb,KAAK,CAACc,GAAN,CAAUF,GAAV,CAAT;AAPS;;AAAA;AAUTC,YAAAA,MAAM,GAAGb,KAAK,CAACe,IAAN,CAAWH,GAAX,EAAgBN,IAAhB,EAAsB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAAtB,CAAT;AAVS;;AAAA;AAaTM,YAAAA,MAAM,GAAGb,KAAK,UAAL,CAAaY,GAAb,EAAkB;AAAEL,cAAAA,OAAO,EAAPA;AAAF,aAAlB,CAAT;AAbS;;AAAA;AAgBTM,YAAAA,MAAM,GAAGb,KAAK,CAACgB,GAAN,CAAUJ,GAAV,EAAeN,IAAf,EAAqB;AAAEC,cAAAA,OAAO,EAAPA;AAAF,aAArB,CAAT;AAhBS;;AAAA;AAmBTM,YAAAA,MAAM,GAAGb,KAAK,EAAd;;AAnBS;AAAA;AAAA,mBAsBAa,MAAM,CAChBI,IADU,CACL,UAACC,WAAD,EAAiB;AAAA,sCACQA,WAAW,CAACZ,IADpB;AAAA,kBACba,QADa,qBACbA,QADa;AAAA,kBACHC,MADG,qBACHA,MADG;;AAGrB,kBAAID,QAAQ,CAACE,IAAT,KAAkB,QAAtB,EAAgC;AAC9BhB,gBAAAA,YAAY,CAAC,kBAAD,EAAqB,OAArB,CAAZ;AACA,uBAAO,IAAP;AACD;;AACD,qBAAOe,MAAP;AACD,aATU,WAUJ,UAACE,KAAD,EAAW;AAChB,kBAAIrB,cAAc,CAACqB,KAAK,CAACH,QAAP,CAAlB,EAAoC;AAAA,oBAC1Bb,KAD0B,GACjBgB,KAAK,CAACH,QADW,CAC1Bb,IAD0B;AAElCD,gBAAAA,YAAY,CAACC,KAAI,CAACa,QAAL,CAAcI,WAAf,EAA4B,OAA5B,CAAZ;AACD,eAHD,MAGO;AACLlB,gBAAAA,YAAY,CAACiB,KAAK,CAACE,QAAN,EAAD,EAAmB,OAAnB,CAAZ;AACD;;AACD,qBAAO,IAAP;AACD,aAlBU,CAtBA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;KAAetB,iB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { isNotUndefined } from './Validator';\n\n// notes\n// ada masalah dengan react hooks sehingga showSnackbar dijadikan\n// parameter dan disupply dari component\n// unit test selanjutnya tidak perlu mengetes skenario error, hanya sukses\n\nexport default async function CommonNetworkCall(path, method, showSnackbar, data = '', headers = {}) {\n  const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n  const url = `${BASE_URL}${path}`;\n\n  let _axios;\n  switch (method) {\n    case 'get':\n      _axios = axios.get(url);\n      break;\n    case 'post':\n      _axios = axios.post(url, data, { headers });\n      break;\n    case 'delete':\n      _axios = axios.delete(url, { headers });\n      break;\n    case 'put':\n      _axios = axios.put(url, data, { headers });\n      break;\n    default:\n      _axios = axios();\n  }\n  // eslint-disable-next-line no-return-await\n  return await _axios\n    .then((apiResponse) => {\n      const { response, result } = apiResponse.data;\n\n      if (response.code !== '000000') {\n        showSnackbar('Terjadi Gangguan', 'error');\n        return null;\n      }\n      return result;\n    })\n    .catch((error) => {\n      if (isNotUndefined(error.response)) {\n        const { data } = error.response;\n        showSnackbar(data.response.user_errors, 'error');\n      } else {\n        showSnackbar(error.toString(), 'error');\n      }\n      return null;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}